{"version":3,"sources":["monsieur.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_typeof","Symbol","iterator","obj","constructor","prototype","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","Monsieur","MonsieurClass","this","$this","Debug","isEditableEventsEnabled","regexEach","RegExp","regexIfOuter","regexIfInner","regexExpressions","regexEditable","spaces","preCompileIfOuter","s","replace","bkt","condition","expression","preParseObjectChecker","preCompileIfInner","preCompileEach","EachList","match","lvl","current","isInnerEach","StartPoint","indexOf","EndPoint","prevStarts","slice","prevEnds","string_Each","ObjectName","a","name","eachComplied","repeat","preParse","preCompileEditable","editable","content","b","checking","c","containsSpecialObject","containsSpecialObjectTreeBuiler","isSpecialSymbol","isString","isIterator","isNumber","isNaN","parent","isCheckExpression","arguments","undefined","Compile","DomString","isListElement","string_Function","val","function_f","Function","e","console","info","error","_EditablesEventListenerRun","AddEventListenerGlobal","Editable","RemoveEdits","AddEdits","currentTarget","closest","keyCode","Save","value","valPrev","parentElement","dataset","classList","add","remove","EditableElement","querySelector","isHasEditablesEventsEnabled","document","addEventListener","contains","querySelectorAll","CreateElementFromString","string","ownerTagName","frag","createDocumentFragment","elem","createElement","innerHTML","childNodes","appendChild","CreateElementsFromString","nodes","push","Select","SelectorOrHTMLelement","tagName","isListElementCssSelector","SelectAll","Selector","eventName","selector","handler","isIt","event","_EventClone","elems","call","isVisible","HTMLElement","isVisibleSelf","element","ContentStyle","window","getComputedStyle","display","opacity","visibility","parseInt","minWidth","width","minHeight","height","isVisibleParent","ClonedEvent","clone","p","d","getOwnPropertyDescriptor","get","set","setPrototypeOf","RemoveWaiting","waiedites","forEach","item","editables","_innerHTML","ValuePrev","string_Select","SelectData","eval","Property","SelectOptions","attributes","EditType","focus","ValueNew","Content","Controller","MonsieurController","DataObject","Data","ErrorHint","LineSave","Settings","DialogBlur","DialogAnimation","EditableClass","EditableWaiting","Culture","MonthNames","WeekDays","WeekDaysShort","TemplatorList","ContentList","perfStart","text","Math","floor","performance","now","Caption","Message","_ref","_ref$CaptionColor","CaptionColor","_ref$CaptionBackgroun","CaptionBackground","_ref$OnAgree","OnAgree","_ref$OnCancel","OnCancel","activeElement","blur","dialog","title","style","color","background","msg","buttons","btnOk","onclick","wrap","getElementsByClassName","btnCancel","body","Confirm","object","div","position","animate","duration","setTimeout","onfinish","mr","MonsieurContent","_ref2","_ref2$Target","Target","_ref2$Content","_ref2$Name","Name","_ref2$Global","Global","_ref2$Title","Title","_ref2$Type","Type","_ref2$Visible","Visible","_ref2$SubContent","SubContent","_ref2$Dialog","Dialog","_ref2$DialogWrapper","DialogWrapper","_ref2$DialogBlur","_ref2$DialogAnimation","_ref2$Show","Show","_ref2$Hide","Hide","_ref2$Shower","Shower","_ref2$Hider","Hider","_ref2$BeforeShow","BeforeShow","_ref2$Refresh","Refresh","data","_ref2$OnClick","OnClick","_ref2$Controller","_ref2$Control","Control","_ref2$Props","Props","_ref2$Methods","Methods","_ref2$GetSet","GetSet","_ref2$AfterBuild","AfterBuild","_ref2$Disabled","Disabled","_ref2$Parent","Parent","isContent","Array","isArray","group","newGroup","TitleContent","AllContents","bind","GetParent","stringName","GetContent","root","found","searcher","__private","ContentNames","GetIndex","children","AddEventListener","func","k","transitionDuration","durationAni","animationDuration","zIndexWrapper","zIndex","zIndexContent","Number","clearTimeout","ToggleTimer","Disactive","Toggle","MonsieurControl","cname","Active","isController","Templator","isHasEditable","from","RefreshOne","removeData","Remove","itemData","extraclass","isPrepend","addData","Add","Edit","t","Items","control","owner","_this","controls","_loop","random","toString","substr","_Content","isGlobal","OnChange","onchange","type","_ref3","_ref3$Target","_ref3$Data","_ref3$ListElement","ListElement","_ref3$EmptyMessage","EmptyMessage","_ref3$EmptyHide","EmptyHide","_ref3$PageSize","PageSize","_ref3$DataCount","DataCount","_ref3$PageGet","PageGet","_ref3$ShowAllButton","ShowAllButton","_ref3$LineSave","property","newValue","callback","_ref3$LineAdd","LineAdd","dataObject","_ref3$NoAnimation","NoAnimation","_ref3$NoBuild","NoBuild","_ref3$BeforeBuild","BeforeBuild","_ref3$AfterBuild","_ref3$AfterAdd","AfterAdd","_ref3$Parent","_Data","_PageSize","_DataCount","_PageCursor","_PageGet","isShowAllButton","isNoAnimaton","isEmptyHide","Dictionary","_Dictionary","Refresher","j","fields","isAttribute","NewValue","BuildValue","split","Rebuilder","lines","NextCount","Limit","paginator","tag","empty","_LineBuilder","also","showAll","isTable","colspan","btnNext","BuildWithIt","Build","btnNextAll","FieldAdd","elemAttributes","WhatFields","index","PageCursor","newItem","itemOld","parentNode","replaceChild","fragment","log","unshift","prepend","splice","outerHTML","list_element","list_elementClassed","pos","AllChildren","TreeBuilder","_ref4","_ref4$Target","_ref4$Data","_ref4$ListElement","_ref4$Drop","Drop","_ref4$SubSelector","SubSelector","_ref4$SubSelectorHand","SubSelectorHandler","_ref4$BeforeBuild","_ref4$AfterBuild","_ref4$Parent","SubTreeClass","Lvl","Branch","html","entag","LineBuilder","Index","BuildElement","indexJ","extra","$lvl","$key","$index","$j","line","ObjItem","sub","MonsieurTutor","TargetButton","TargetContent","MT","ContentBG","_Description","_Step","_ButtonNext","_ButtonStop","ButtonNextText","TutorPosition","temp","ColorTransparent","backgroundColor","ElemCssRestore","Element","toLowerCase","outline","nElements","ElemCssSet","Run","desc","GoStep","Stop","ElementDesc","ElemParent","posX","offsetLeft","clientWidth","posY","offsetTop","clientHeight","innerWidth","documentElement","scrollTop","innerHeight","offsetHeight","left","top","MonsieurLoading","DoArc","id","cx","cy","radius","max","circle","getElementById","getAttribute","angle","radians","PI","x","cos","y","sin","setAttribute","_ref5","_ref5$Target","Timeout","TimeoutHide","MonsieurTooltip","_ref6","ToolTip","_ref6$Target","_ref6$Attribute","Attribute","_ref6$Delay","Delay","_ref6$Time","Time","_ref6$Custom","Cursor","Custom","Timer","Destr"],"mappings":"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","file":"monsieur.min.js","sourcesContent":["//\r\n// Monsieur v0.9.0 [28.07.2017]\r\n//\r\nlet Monsieur = (function(){\r\n    class MonsieurClass {\r\n        constructor() {\r\n            let $this = this;\r\n            this.Debug = false;\r\n            //this.isHasEditables = false;\r\n            this.isEditableEventsEnabled = false;\r\n            //regexes\r\n            const regexEach = new RegExp(/{{#each\\s+([^}]+)}}/g);\r\n            const regexIfOuter = new RegExp(/{{#if\\s+([^}]+)}}([\\s\\S]*?){{#endif}}/g);\r\n            const regexIfInner = new RegExp(/{{#if([\\s\\S]*?)}}/g);\r\n            const regexExpressions = new RegExp(/{{([^#}]+)}}/g);\r\n            const regexEditable = new RegExp(/<[^>]+class=['\"][\\w\\d\\s-]*(editable)[\\w\\d\\s-]*['\"][^>]*>([^<]*)<[^>]*>/g);\r\n            //compile helpers\r\n            const spaces = \"\\t\";\r\n            const preCompileIfOuter = function(s){\r\n                s = s\r\n                    .replace(/#IF/g, '#if')\r\n                    .replace(/#ENDIF/g, '#endif')\r\n                    .replace(regexIfOuter, function (bkt, condition, expression ) {\r\n                        return `\\`+\r\n/* OUTER \"IF\" */\r\n(function($this){\r\n    if (${preParseObjectChecker(condition)}) {\r\n        return \\`${expression}\\`;\r\n    }\r\n    return '';\r\n})($this)+\\``;\r\n                    });\r\n                return s;\r\n            };\r\n            const preCompileIfInner = function(s){\r\n                s = s.replace(regexIfInner, function (s, condition) {\r\n                    condition = condition\r\n                        .replace(/&gt;/g,  \">\")\r\n                        .replace(/&lt;/g,  \"<\")\r\n                        .replace(/#less/g, \" < \")\r\n                        .replace(/#more/g, \" > \")\r\n                        .replace(/&amp;/g, \"&\")\r\n                        .replace(/\\|/g,    '\"');\r\n                    return `\\`+\r\n    /* LOCAL \"IF\" */\r\n    (function(){\r\n        return (${condition}); \r\n        return '';})()+\\``;\r\n                });\r\n                return s;\r\n            };\r\n            const preCompileEach = function(s){\r\n                s = s\r\n                    .replace(/{{#EACH/g, \"{{#each\")\r\n                    .replace(/{{#ENDEACH/g, \"{{#endeach\");\r\n                let EachList = s.match(regexEach);\r\n                let lvl = 0;\r\n                if (EachList !== null){\r\n                    for (let i = EachList.length-1; i >= 0; i--){\r\n                        let current = EachList[i];\r\n                        let isInnerEach = false;\r\n                        lvl++;\r\n                        let StartPoint = s.indexOf(current);\r\n                        let EndPoint   = s.indexOf(\"{{#endeach}}\", StartPoint);\r\n\r\n                        let prevStarts = s.slice(0, StartPoint).match(regexEach);\r\n                        prevStarts = prevStarts!==null ? prevStarts.length: 0;\r\n                        let prevEnds = s.slice(0, StartPoint).match(/{{#endeach}}/g);\r\n                        prevEnds = prevEnds!==null ? prevEnds.length: 0;\r\n                        if ( (prevStarts > prevEnds ))\r\n                        {\r\n                            isInnerEach = true;\r\n                            lvl = 0;\r\n                        }\r\n                        ////\r\n                        let string_Each = s.slice(StartPoint, EndPoint+12);\r\n                        let expression  = string_Each.slice(current.length, string_Each.length-12);\r\n                        let ObjectName = current.replace(/{{#each\\s+([\\s\\S]+)}}/, function(a,name){\r\n                            return name;\r\n                        });\r\n                        ObjectName = preParseObjectChecker(ObjectName);\r\n                        //the each template\r\n                        let eachComplied = '`+' +\r\n                            spaces.repeat(lvl)+'/* EACH */(function(inner, $parent){                                                                   \\r\\n' +\r\n                            spaces.repeat(lvl)+'    if (!inner || (Object.keys(inner).length === 0 && inner.constructor === Object && isNaN(inner)))   \\r\\n' +\r\n                            spaces.repeat(lvl)+'        return \"\";                                                                                     \\r\\n' +\r\n                            spaces.repeat(lvl)+'    let string_result= \"\";                                                                             \\r\\n' +\r\n                            spaces.repeat(lvl)+'    for(let j = 0; j < inner.length; j++){                                                             \\r\\n' +\r\n                            spaces.repeat(lvl)+'        let $this = inner[j];                                                                          \\r\\n' +\r\n                            spaces.repeat(lvl)+'        let o = inner[j];                                                                              \\r\\n' +\r\n                            spaces.repeat(lvl)+'        string_result += \\`'+preParse(expression) + '\\`;                                               \\r\\n' +\r\n                            spaces.repeat(lvl)+'    }                                                                                                  \\r\\n' +\r\n                            spaces.repeat(lvl)+'    return string_result;                                                                              \\r\\n' +\r\n                            spaces.repeat(lvl)+'})('+ObjectName+', {$parent: typeof $parent !== \"undefined\"?$parent:null, $this: $this, i: i} ) +`                    ';\r\n                        s = s.replace(string_Each, eachComplied)\r\n\r\n                    }\r\n                }\r\n                return s;\r\n            };\r\n            const preCompileEditable = function(s){\r\n                return  s.replace(regexEditable, function (match, editable, content) {\r\n                    match = match.replace(/<[\\s\\S]+?(>)/, function (a, b) {\r\n                        return a.replace(b, ` data-line=\"{{i}}\" data-property=\"${content.replace('{{','').replace('}}','')}\">`);\r\n                    });\r\n                    return match.replace(content, `<div class=\"editable-helper editable-value\">${content}</div><div class=\"editable-helper editable-icon\"></div>`);\r\n                });\r\n\r\n            };\r\n            const preParseObjectChecker = function (ObjectName) {\r\n                //ok check if it's expression\r\n                //new:   [^\\s\\d\\+\\-\\%()*]+\r\n                //old:   [^+\\-%*\\/()]+\r\n                function checking(c) {\r\n                    let s = c.replace(/\\s/g, \"\");\r\n                    let containsSpecialObject = (s.indexOf('$item')> -1 || s.indexOf('$this') > -1 || s.indexOf('$parent') > -1 ) ;\r\n                    let containsSpecialObjectTreeBuiler = (s.indexOf('$index')> -1 || s.indexOf('$j')> -1 || s.indexOf('$key') > -1 || s.indexOf('$lvl') > -1 ) ;\r\n                    let isSpecialSymbol = (s === \"?\" || s.indexOf(\"=\") > -1 || s.indexOf(\">\") > -1|| s.indexOf(\"<\") > -1);\r\n                    let isString = s.match(/^\"[\\s\\S]*\"$/) !== null;\r\n                    let isIterator = s === \"i\" || s === \"j\";\r\n                    let isNumber = !isNaN(s);\r\n                    if (containsSpecialObject || containsSpecialObjectTreeBuiler || isIterator || isNumber || isString ||isSpecialSymbol){\r\n                        return c;\r\n                    }\r\n                    //  s = \"o.\"+s;\r\n                    return \"o.\"+s;\r\n                }\r\n                /*if (ObjectName.indexOf('=') > -1)\r\n                    debugger;*/\r\n                ObjectName = ObjectName.replace(/[^\\s+\\-\\/%()*]+/g, function (c) {\r\n                    let parent = c.match(/&/g);\r\n                    if (parent !== null){\r\n                        for (let i = 0; i < parent.length; i++){\r\n                            if (i < parent.length-1)\r\n                                c = c.replace('&', \"$parent\");\r\n                            else\r\n                                c = c.replace('&', \"$parent.$this\");\r\n                        }\r\n                        return c;\r\n                    }\r\n                    else {\r\n                        return checking(c);\r\n                    }\r\n\r\n\r\n                });\r\n\r\n\r\n                //   ObjectName = \"o.\"+ObjectName;\r\n                return ObjectName;\r\n            };\r\n            const preParse = function(c, isCheckExpression = true){\r\n                return c.replace(regexExpressions, function(bkt, expression){\r\n                    if (isCheckExpression)\r\n                        return '${'+preParseObjectChecker(expression)+'}';\r\n                    else\r\n                        return '${'+expression+'}';\r\n                });\r\n            };\r\n            /**\r\n             * Template compiler\r\n             * @param {string} DomString\r\n             * @param {bool} isListElement\r\n             * @return {Function|*}\r\n             * @constructor\r\n             */\r\n            this.Compile = function(DomString, isListElement) {\r\n                DomString = DomString.replace(/[\\n]+/g, \" \").replace(/[ ]{3,}/g, '');\r\n                //shell '\r\n                DomString = DomString.replace(/'/g, \"\\\\'\");\r\n                //.replace(/&gt;/g, \">\").replace(/&lt;/g, \"<\").replace(/&amp;/g, \"&\");\r\n                if (isListElement)\r\n                {\r\n                    DomString = preCompileEditable(DomString);\r\n                    DomString = preCompileIfOuter(DomString);\r\n                    DomString = preCompileEach(DomString);\r\n                }\r\n\r\n                DomString = preParse(DomString);\r\n                DomString = preCompileIfInner(DomString);\r\n                let string_Function = `\r\nlet $this = o;\r\nlet $item = o;\r\nlet $num = i+1;\r\nlet $denum = length-i;\r\n//treebuilder's\r\nlet $index;\r\nlet $key;\r\nlet $lvl;\r\nlet $j;\r\nif (extra){\r\n    $index = extra.$index;\r\n    $key = extra.$key;\r\n    $lvl = extra.$lvl;\r\n    $j = extra.$j;\r\n}\r\nlet string_Result = \"\";\r\nif (o === undefined || (Object.keys(o).length === 0 && o.constructor === Object && isNaN(o)) ) \r\n    return '';\r\nreturn \\``;\r\n                string_Function += DomString +'`;';\r\n                //if ie\r\n                //let isUnbrowser = true;\r\n                //if (isUnbrowser){\r\n                    string_Function = string_Function\r\n                        .replace(/`/g, `'`)\r\n                        .replace(/\\$\\{([^}]*)\\}/g, function(match, val){\r\n                        return `'+${val}+'`\r\n                    });\r\n                //}\r\n\r\n                let function_f;\r\n                try {\r\n                    function_f = new Function('o', 'i', 'length', 'extra', string_Function);\r\n                }\r\n                catch (e){\r\n                    console.info(string_Function);\r\n                    console.error(e);\r\n                }\r\n                //console.log('Compiled:');\r\n                //console.log(f);\r\n                return function_f;\r\n            };\r\n            this._EditablesEventListenerRun = function(content){\r\n                $this.AddEventListenerGlobal('dblclick', '.editable', function (e) {\r\n                    $this.Editable.RemoveEdits();\r\n                    $this.Editable.AddEdits(e.currentTarget);\r\n                }, content);\r\n                $this.AddEventListenerGlobal('click', '.editable-icon', function (e) {\r\n                    $this.Editable.RemoveEdits();\r\n                    $this.Editable.AddEdits(e.currentTarget.closest('.editable'));\r\n                }, content);\r\n                $this.AddEventListenerGlobal('dblclick', '.editable', function (e) {\r\n                    $this.Editable.RemoveEdits();\r\n                    $this.Editable.AddEdits(e.currentTarget);\r\n                }, content);\r\n                //editing\r\n                $this.AddEventListenerGlobal('change', '.editable-editor', function (e) {\r\n\r\n                }, content);\r\n\r\n                $this.AddEventListenerGlobal('keyup', '.editable-textbox', function (e) {\r\n                    if(e.keyCode === 13) {\r\n                        $this.Editable.Save(e.currentTarget.closest('.editable'),  e.currentTarget.value);\r\n                        return false;\r\n                    }\r\n\r\n                    let val = e.currentTarget.value;\r\n                    let valPrev = e.currentTarget.parentElement.dataset['value'];\r\n                    if (val !== valPrev)\r\n                        e.currentTarget.parentElement.classList.add('editable-waiting');\r\n                    else\r\n                        e.currentTarget.parentElement.classList.remove('editable-waiting');\r\n\r\n                }, content);\r\n\r\n                //save\r\n                $this.AddEventListenerGlobal('click', '.editable-save-button', function (e) {\r\n                    let EditableElement = e.currentTarget.closest('.editable');\r\n                    $this.Editable.Save(e.currentTarget.closest('.editable'),  EditableElement.querySelector('.editable-editor').value);\r\n                }, content);\r\n\r\n\r\n\r\n                if ($this.isHasEditablesEventsEnabled)\r\n                    return;\r\n                document.addEventListener('click', function (e) {\r\n                    if ( e.target.classList.contains('editable-helper') && document.querySelectorAll('.editable-helper, .editable-editing') !== null)\r\n                    {\r\n                        return;\r\n                    }\r\n                    $this.Editable.RemoveEdits();\r\n                });\r\n                $this.isHasEditablesEventsEnabled = true;\r\n            };\r\n            /**\r\n             *\r\n             * @param {string} string\r\n             * @param {string} ownerTagName\r\n             * @return {DocumentFragment}\r\n             * @constructor\r\n             */\r\n            this.CreateElementFromString = function(string, ownerTagName = \"div\"){\r\n                let frag = document.createDocumentFragment();\r\n                let elem = document.createElement(ownerTagName);\r\n                elem.innerHTML = string;\r\n                while (elem.childNodes[0]) {\r\n                    frag.appendChild(elem.childNodes[0]);\r\n                }\r\n                return frag.childNodes[0];\r\n            };\r\n            /**\r\n             *\r\n             * @param {string} string\r\n             * @param {string} ownerTagName\r\n             * @return {Array}\r\n             * @constructor\r\n             */\r\n            this.CreateElementsFromString = function(string, ownerTagName = \"div\"){\r\n                let frag = document.createDocumentFragment();\r\n                let elem = document.createElement(ownerTagName);\r\n                elem.innerHTML = string;\r\n                while (elem.childNodes[0]) {\r\n                    frag.appendChild(elem.childNodes[0]);\r\n                }\r\n                if (frag.childNodes.length > 0)\r\n                {\r\n                    let nodes = [];\r\n                    for (let i = 0; i < frag.childNodes.length; i++)\r\n                        nodes.push(frag.childNodes[i]);\r\n                    return nodes;\r\n                }\r\n                return null;\r\n            };\r\n            /**\r\n             *\r\n             * @param {string, HTMLElement} SelectorOrHTMLelement\r\n             * @param parent\r\n             * @return {HTMLElement}\r\n             * @constructor\r\n             */\r\n            this.Select = function(SelectorOrHTMLelement, parent = document){\r\n                //debugger;\r\n                if (typeof SelectorOrHTMLelement.tagName !== 'undefined' || SelectorOrHTMLelement === document)\r\n                    return SelectorOrHTMLelement;\r\n                try{\r\n                    const isListElementCssSelector = SelectorOrHTMLelement.match(/^[a-zA-Z0-9.,\\-_ \\]\\[\"=:*#]+$/g) !== null;\r\n                    if (isListElementCssSelector)\r\n                        return parent.querySelector(SelectorOrHTMLelement);\r\n                    return null;\r\n                }\r\n                catch (e){\r\n                    console.info('Monsieur.Select SelectorOrHTMLelement', SelectorOrHTMLelement);\r\n                    console.info('Monsieur.Select e', e);\r\n                }\r\n\r\n            };\r\n            /**\r\n             *\r\n             * @param {string} Selector\r\n             * @param {HTMLElement} parent\r\n             * @return {NodeList}\r\n             * @constructor\r\n             */\r\n            this.SelectAll = function(Selector, parent = document){\r\n                if (typeof Selector.tagName !== 'undefined' || Selector === document)\r\n                    return [Selector];\r\n                return parent.querySelectorAll(Selector);\r\n            };\r\n            /**\r\n             *\r\n             * @param {string} eventName\r\n             * @param {string} selector\r\n             * @param {function} handler\r\n             * @param {HTMLElement} parent\r\n             * @constructor\r\n             */\r\n            this.AddEventListenerGlobal = function(eventName, selector, handler, parent = document){\r\n                parent.addEventListener(eventName, function(e) {\r\n                    let target = e.target;\r\n                    let isIt = false;\r\n                    let event = Monsieur._EventClone(e);\r\n                    let elems = parent.querySelectorAll(selector);\r\n                    if (elems[0] === target)\r\n                    {\r\n                        event.currentTarget = target;\r\n                        isIt = true;\r\n                    }\r\n                    if (!isIt){\r\n                        for (let i = 0; i < elems.length; i++){\r\n                            if (elems[i].contains(target)){\r\n                                isIt = true;\r\n                                event.currentTarget = target.closest(selector);\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (isIt){\r\n                        handler.call(event.currentTarget, event);\r\n                    }\r\n                });\r\n            };\r\n            /**\r\n             *\r\n             * @param {HTMLElement} HTMLElement\r\n             * @return {boolean}\r\n             */\r\n            this.isVisible = function (HTMLElement){\r\n                //check invisible state;\r\n                let isVisibleSelf = function(element){\r\n                    let ContentStyle = window.getComputedStyle(element);\r\n                    if ( (ContentStyle.display === \"none\") || (ContentStyle.opacity === \"0\") || (ContentStyle.visibility === \"hidden\") )\r\n                        return false;\r\n                    //check for null-size\r\n                    if ( (parseInt(ContentStyle.minWidth) === 0 || ContentStyle.minWidth === \"auto\")  && parseInt(ContentStyle.width) === 0)\r\n                        return false;\r\n                    if ( (parseInt(ContentStyle.minHeight) === 0 || ContentStyle.minHeight === \"auto\") && parseInt(ContentStyle.height) === 0)\r\n                        return false;\r\n                    return true;\r\n                };\r\n                let isVisibleParent = function (element) {\r\n                    while (element.parentElement){\r\n                        if (!isVisibleSelf(element.parentElement))\r\n                        {\r\n                            return false;\r\n                        }\r\n                        element = element.parentElement;\r\n                    }\r\n                    return true;\r\n                };\r\n                if (!isVisibleSelf(HTMLElement))\r\n                {\r\n                    return false;\r\n                }\r\n\r\n                return isVisibleParent(HTMLElement);\r\n\r\n                return true;\r\n            };\r\n            /**\r\n             *\r\n             * @param e\r\n             * @return {ClonedEvent}\r\n             * @constructor\r\n             */\r\n            this._EventClone = function(e) {\r\n                function ClonedEvent() {}\r\n                let clone=new ClonedEvent();\r\n                for (let p in e) {\r\n                    let d = Object.getOwnPropertyDescriptor(e, p);\r\n                    if (d && (!d.writable || !d.configurable || !d.enumerable || d.get || d.set)) {\r\n                        Object.defineProperty(clone, p, d);\r\n                    }\r\n                    else {\r\n                        clone[p] = e[p];\r\n                    }\r\n                }\r\n                Object.setPrototypeOf(clone, e);\r\n                return clone;\r\n            };\r\n            //this.Content = MonsieurContent;\r\n            //this.Templator = Templator;\r\n            /*editable*/\r\n            //this.Editables = '.editable-waiting';\r\n\r\n            this.Editable = {\r\n                RemoveWaiting(){\r\n                    let waiedites = document.querySelectorAll('.editable-waiting');\r\n                    waiedites.forEach(function (item) {\r\n                        item.classList.remove('editable-waiting');\r\n                    });\r\n                },\r\n                RemoveEdits(){\r\n                    let editables = document.querySelectorAll('.editable-editing');\r\n                    editables.forEach(function (item) {\r\n                        item.innerHTML = item._innerHTML;\r\n                        item.classList.remove('editable-editing');\r\n                     //   item.parentElement.style.paddingBottom = '';\r\n                    //    item.parentElement.style.paddingTop = '';\r\n                    });\r\n                    $this.Editable.RemoveWaiting();\r\n                },\r\n                AddEdits(EditableElement){\r\n                    EditableElement._innerHTML = EditableElement.innerHTML;\r\n                    let ValuePrev = EditableElement.querySelector('.editable-value').innerHTML;\r\n                    EditableElement.classList.add('editable-editing');\r\n                    EditableElement.dataset['value'] = ValuePrev;\r\n                   // EditableElement.style.paddingBottom = '0px';\r\n                    //EditableElement.style.paddingTop = '0px';\r\n                    if (!EditableElement.dataset['object']) //if no selectable data, just text editor is needed\r\n                    {\r\n                        let EditType = EditableElement.dataset['type'];\r\n                        if (typeof EditType === 'undefined')\r\n                            EditType = 'text';\r\n                        EditableElement.innerHTML = `<input class=\"textbox editable-helper editable-editor editable-textbox\" type=\"${EditType}\" value=\"${ValuePrev}\"><div class=\"editable-helper editable-save-button\"></div>`;\r\n                        EditableElement.querySelector('.editable-editor').focus();\r\n                    }\r\n                    else    //selectable data\r\n                    {\r\n                        let string_Select = `<select class=\"select editable-helper editable-editor editable-select\">`;\r\n                        let SelectData = eval(EditableElement.dataset['object']);\r\n                        //console.log('-SelectData data-', SelectData);\r\n                        let Property = EditableElement.dataset['property'];\r\n                        let SelectOptions = '';\r\n                        SelectData.forEach(function (item) {\r\n                            //SelectOptions += ``\r\n                            let attributes = '';\r\n                            if (typeof item === typeof {}){\r\n                                for (let key in item)\r\n                                {\r\n                                    attributes += ` data-property_${key}=\"${item[key]}\"`;\r\n                                }\r\n                                string_Select += `<option class=\"editable-helper\" ${attributes}>${item[Property]}</option>`;\r\n                            }\r\n                            else{\r\n                                string_Select += `<option class=\"editable-helper\" ${(item === ValuePrev)? \"selected\":\"\"}>${item}</option>`;\r\n                            }\r\n                        });\r\n                        string_Select += '</select><div class=\"editable-helper editable-save-button\"></div>';\r\n                        //let Select = Monsieur.CreateElementFromString(string_Select);\r\n                        //Select.value = ValuePrev;\r\n                        EditableElement.innerHTML = string_Select;\r\n\r\n                    }\r\n\r\n\r\n                },\r\n                Save(EditableElement, ValueNew){\r\n                    let Content = EditableElement.closest('.mt-content');\r\n                    let Controller = Content.MonsieurController;\r\n                    let i = EditableElement.dataset['line'];\r\n                    let Property = EditableElement.dataset['property'];\r\n                    let DataObject = Controller.Data[i];\r\n                    if (ValueNew === '' || ValueNew === null || typeof ValueNew === 'undefined'){\r\n                        console.info('New Value is empty');\r\n                        Monsieur.ErrorHint(EditableElement, \"Пустое поле или неправильные данные\");\r\n                        return;\r\n                    }\r\n                    EditableElement.innerHTML = EditableElement._innerHTML;\r\n                    EditableElement.dataset['value'] = ValueNew;\r\n                    EditableElement.querySelector('.editable-value').innerHTML = ValueNew;\r\n                    EditableElement.classList.remove('editable-editing');\r\n                    DataObject[Property] = ValueNew;\r\n\r\n                    //so server now\r\n                    Controller.LineSave(Property, ValueNew, Monsieur.Editable.RemoveWaiting);\r\n                }\r\n            };\r\n            ///\r\n            this.Settings = {\r\n                DialogBlur: null,                    //{string, jQuery, HTMLElement} - where blur on dialog\r\n                DialogAnimation: 'monsieur-animation-dialog', //{string} -  css-animation class\r\n                EditableClass:  'editable',\r\n                EditableWaiting:  'editable-waiting',\r\n            };\r\n            this.Culture = {\r\n                MonthNames: [\"Январь\", \"Февраль\", \"Март\", \"Апрель\", \"Май\", \"Июнь\", \"Июль\", \"Август\", \"Сентябрь\", \"Октябрь\", \"Ноябрь\", \"Декабрь\"],\r\n                WeekDays: [\"Понедельник\", \"Вторник\", \"Среда\", \"Четверг\", \"Пятница\", \"Суббота\", \"Воскресенье\"],\r\n                WeekDaysShort: [\"пн\", \"вт\", \"ср\", \"чт\", \"пт\", \"сб\", \"вс\"],\r\n            };\r\n            this.TemplatorList = [];\r\n            this.ContentList = {};\r\n        };\r\n\r\n\r\n        PerformanceNow(perfStart, text){\r\n            if (!text)\r\n                text = \"Perf\";\r\n            console.info(\"[\" + text + \"]: \" +Math.floor((window.performance.now()-perfStart)*100)/100 + \"ms\");\r\n        }\r\n\r\n        /**\r\n         * Confirmation dialog\r\n         * @param Caption\r\n         * @param Message\r\n         * @param CaptionColor\r\n         * @param CaptionBackground\r\n         * @param OnAgree\r\n         * @param OnCancel\r\n         * @constructor\r\n         */\r\n        Confirm(Caption  = \"Achtung\", Message = '', {\r\n            CaptionColor =  '',\r\n            CaptionBackground = '',\r\n            OnAgree = () => {},\r\n            OnCancel = null\r\n        } = {})\r\n        {\r\n\r\n            document.activeElement.blur();\r\n\r\n            let dialog = document.createElement('div');\r\n            dialog.classList.add('monsieur-confirm');\r\n            if (Monsieur.Settings.DialogAnimation)\r\n                dialog.classList.add(Monsieur.Settings.DialogAnimation);\r\n            //###title\r\n            let title = document.createElement(\"div\");\r\n            title.classList.add('cd-caption');\r\n            title.innerHTML = Caption;\r\n            title.style.color = CaptionColor;\r\n            title.style.background = CaptionBackground;\r\n            dialog.appendChild(title);\r\n            //###message field\r\n            let msg = document.createElement(\"div\");\r\n            msg.classList.add('cd-text');\r\n            msg.innerHTML = Message;\r\n            dialog.appendChild(msg);\r\n            //###buttonfield\r\n            let buttons = document.createElement(\"div\");\r\n            buttons.classList.add(\"cd-buttons\");\r\n            dialog.appendChild(buttons);\r\n            //###button confirm\r\n            let btnOk = document.createElement(\"div\");\r\n            btnOk.classList.add(\"button\", \"cd-button\", \"btn-diag-confirm\");\r\n            btnOk.innerHTML = \"Ok\";\r\n            btnOk.onclick = function(){\r\n                if (OnAgree !== null && OnAgree !== undefined)\r\n                    OnAgree();\r\n                if (Monsieur.Settings.DialogBlur)\r\n                    Monsieur.Select(Monsieur.Settings.DialogBlur).classList.remove('monsieur-blur');\r\n                //$(Monsieur.Settings.DialogBlur).removeClass('monsieur-blur');\r\n                wrap.remove();\r\n                dialog.remove();\r\n            };\r\n            dialog.getElementsByClassName(\"cd-buttons\")[0].appendChild(btnOk);\r\n            //###button cancel\r\n            if (OnCancel !== null)\r\n            {\r\n                let btnCancel = document.createElement(\"div\");\r\n                btnCancel.classList.add(\"button\", \"cd-button\", \"btn-diag-cancel\");\r\n                btnCancel.innerHTML = \"Отмена\";\r\n                btnCancel.onclick = function(){\r\n                    if (OnCancel !== null)\r\n                        OnCancel();\r\n                    if (Monsieur.Settings.DialogBlur)\r\n                        Monsieur.Select(Monsieur.Settings.DialogBlur).classList.remove('monsieur-blur');\r\n                    //$(Monsieur.Settings.DialogBlur).removeClass('monsieur-blur');\r\n                    wrap.remove();\r\n                    dialog.remove();\r\n\r\n                };\r\n                dialog.getElementsByClassName(\"cd-buttons\")[0].appendChild(btnCancel);\r\n            }\r\n            //### Dialog-Wrapper\r\n            let wrap = document.createElement(\"div\");\r\n            wrap.classList.add('ConfirmDialog-wrapper');\r\n            document.body.appendChild(wrap);\r\n            document.body.appendChild(dialog);\r\n            if (Monsieur.Settings.DialogBlur)\r\n            {\r\n                wrap.style.background = 'none';\r\n                Monsieur.Select(Monsieur.Settings.DialogBlur).classList.add('monsieur-blur');\r\n                //$(Monsieur.Settings.DialogBlur).addClass('monsieur-blur');\r\n            }\r\n        }\r\n        //Confirmation dialog teamplate just\r\n        NoFeature(name = \"\"){\r\n            if (name !== \"\")\r\n                name = \"\\\"\"+name+\"\\\"\";\r\n            this.Confirm(\r\n                \"Error\",\r\n                \"Sorry, function \"+name+\" is not available yet\"\r\n            )\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @param object\r\n         * @param msg\r\n         * @constructor\r\n         */\r\n        ErrorHint(object, msg) {\r\n            if (!msg)\r\n                msg = \"Поле не может быть пустым\";\r\n            let div = document.createElement('div');\r\n            div.classList.add('monsieur-error-hint');\r\n            div.innerHTML = msg;\r\n            object.parentElement.style.position = 'relative';\r\n            object.parentElement.appendChild(div);\r\n            div.style.display = 'block';\r\n            try {\r\n                div.animate({opacity: [0, 1]}, {duration : 300});\r\n            }\r\n            catch (e){}\r\n\r\n            setTimeout(function(){\r\n\r\n                try {\r\n                    div.animate({opacity: [1, 0]}, {duration : 300})\r\n                        .onfinish = ()=>{div.style.display = 'none'};\r\n                }\r\n                catch (e){\r\n                    div.style.display = 'none';\r\n                }\r\n                //TODO CHECK FADEIN FADEOUT\r\n                setTimeout(function(){\r\n                    object.parentElement.style.position = '';\r\n                    div.remove();\r\n                }, 500)\r\n            }, 2000)\r\n        }\r\n    }\r\n    return new MonsieurClass();\r\n})();\r\nlet mr = Monsieur;\r\n\r\n//sets = {\r\n//  SubContent: [\r\n//      {sets},                             -same object to create subs\r\n// ],\r\n//\r\n// Controller:{                                   - if needs some Template master\r\n//    Type: Templator,                                    - class link [optional] Templator by default\r\n//    Target: {string|HTMLElement}                        -[optional] if Controller.Target is undefined, Controller.Target = sets.Target\r\n//    Data: {array|object},                               - data array [optional] Data === [] by default\r\n//    ListElement: {string|HTMLElement},                  - repeated element\r\n//    EmptyMessage: \"no items\",                           - render if Data.length === 0;\r\n\r\n//  Control: {\r\n//    Target: {string, jQuery, HTMLElement},\r\n//    Global: {bool}                               - set global event listener. Set true if control renders after init or it renders dynamicly\r\n//    OnClick: {function}                          - here this === current MonsieurContent\r\n//    OnChange: {function}                         - here this === current MonsieurContent\r\n// },}\r\n\r\n\r\nclass MonsieurContent {\r\n    constructor({                       //--MonsieurContent Settings--\r\n        Target     = null,              //{string, HTMLElement} - where to render       [by default this.Parent.Content];\r\n        Content    = null,              //{string}  - html content string, if           [by default this.Target.innerHTML]\r\n        Name       = null,              //{string}  - MonsieurContent's name. Need for search content by .GetContent(contentName)\r\n        Global     = false,             //{bool}    - actual for SubContent. Set true, if SubContent is outside of Parent\r\n        Title      = \"\",                //{string}  -  header element, contains name/caption/title of content\r\n        Type       = \"Untyped\",         //{string}  - if has - this.Content will be invisible by default, if need be visible set next property:\r\n        Visible    = undefined,         //{bool}    - make visible by default (if has no Type - visible by default)\r\n        SubContent = [],                //{Array} of MonsieurContent Settings\r\n        Dialog     = false,             //{bool} - make dialog absolute window with dialog wrapper\r\n        DialogWrapper = true,           //{bool} - show dialog  wrapper bg\r\n        DialogBlur = null,              //{string, jQuery, HTMLElement} target background for blur when dialog\r\n        DialogAnimation = null,         //{string} - css animation name\r\n        Show       = null,              //{function} - show action\r\n        Hide       = null,              //{function} - hide action\r\n        Shower     = function(){this.Content.style.display = '';},       //custom show handler [calls before .Show]\r\n        Hider      = function(){this.Content.style.display = 'none';},   //custom hide handler [calls before .Hide]\r\n        BeforeShow = function(){},      //{function} - calls before .Shower and .Show\r\n        Refresh    = function(data, i){\r\n            if (this.Controller)\r\n                this.Controller.Refresh(data, i)\r\n        },                              //{function} - refresh content, may be call on page resize for example\r\n        OnClick    = null,              //{function} - this.Content.onclick event\r\n        Controller = null,              //{object} contoller settings(Templator or TreeBuilder)\r\n        Control    = null,              //{object} (help upper)\r\n\r\n\r\n        Props      = function(){},      //{function}  - recomented for extra fields  for MonsieurContent (this.Extrafield =...)\r\n        Methods    = function(){},      //{function}  - recomented for extra methods for MonsieurContent (this.ExtraMethod = function(){...} )\r\n        GetSet     = {},                //{function}  - recomenter for extra getters and setters for MonsieurContent\r\n        AfterBuild = function(){},      //{function} - calls after MonsieurContent init\r\n        Disabled   = false,             //debugging,\r\n        Parent     = null               //link to parent MonsieurContent of SubContent\r\n    })\r\n\r\n    {\r\n        if (Disabled)\r\n            return;\r\n        let $this = this;\r\n        this.isContent = true;\r\n\r\n        this.Parent = Parent;\r\n        if (Parent !== null){\r\n\r\n            if (Target !== null)\r\n                this.Target = Monsieur.Select(Target, this.Parent.Content);\r\n            else\r\n                this.Target = this.Parent.Content;\r\n            if (Global)\r\n                this.Target = Monsieur.Select(Target);\r\n        }\r\n        else if (Target !== null){\r\n            this.Target = Monsieur.Select(Target);\r\n            //this.Content = Monsieur.Select(Target);\r\n        }\r\n        else{\r\n            this.isContent = false;\r\n            return;\r\n        }\r\n        if (Content !== null)\r\n        {\r\n            if (Controller === null || Array.isArray(Controller.Data))\r\n            {\r\n                this.Content = Monsieur.CreateElementFromString(Content);\r\n            }\r\n            else if (Controller !== null && !Array.isArray(Controller.Data))\r\n            {\r\n                Content = Content.replace(/<[^>]+>([^<]*{{([^#}]+)}}[^<]*)<[^>]+>/g, function (match, group) {\r\n                    let newGroup = group.replace(/{{[^#}]+}}/g, function (match) {\r\n                        return match.replace(match, `<span>${match}</span>`);\r\n                    });\r\n                    return  match.replace(group, newGroup);\r\n                });\r\n                this.Content = Monsieur.CreateElementFromString(Content);\r\n            }\r\n            //this._Content = Content;\r\n            this.Target.appendChild(this.Content);\r\n        }\r\n        else{\r\n            this.Content = this.Target;\r\n        }\r\n        if (this.Content === null || this.Target === null)\r\n            return;\r\n        this.TitleContent = Monsieur.Select(Title, this.Content);\r\n        this.Type = Type;\r\n        this.Name = Name;\r\n        this.AllContents = Monsieur.ContentList;\r\n\r\n\r\n        //### METHODS\r\n        /**\r\n         * @param {object} Data\r\n         * @param {int} index\r\n         */\r\n        this.Refresh = Refresh.bind(this);\r\n        /**\r\n         *\r\n         * @param {selector|HTMLElement} s\r\n         * @returns {HTMLElement}\r\n         * @constructor\r\n         */\r\n        this.Select = function(s){\r\n            return Monsieur.Select(s, $this.Content)\r\n        };\r\n        /**\r\n         *\r\n         * @param {selector|HTMLElement} s\r\n         * @returns {NodeList}\r\n         * @constructor\r\n         */\r\n        this.SelectAll = function(s){\r\n            return Monsieur.SelectAll(s, $this.Content)\r\n        };\r\n        /**\r\n         *\r\n         * @param {string}stringName\r\n         * @constructor\r\n         * @returns {MonsieurContent}\r\n         */\r\n        this.GetParent = function(stringName='root'){\r\n            let content = $this;\r\n            while (content.Parent !== null && content.Name !== stringName)\r\n                content = content.Parent;\r\n            return content;\r\n        };\r\n        /**\r\n         *\r\n         * @param {string}stringName\r\n         * @constructor\r\n         * @returns {MonsieurContent}\r\n         */\r\n        this.GetContent = function (stringName='root') {\r\n            let parent = this.GetParent(stringName);\r\n            if (parent.Name === stringName)\r\n                return parent;\r\n            let root = parent;\r\n            let found = null;\r\n            let searcher = function (content) {\r\n                if (content.isContent && content.__private.ContentNames)\r\n\r\n                    for( let i = 0; i < content.__private.ContentNames.length; i++){\r\n                        let name = content.__private.ContentNames[i];\r\n                        if (name === stringName)\r\n                            return content[name];\r\n                        found = searcher(content[name])\r\n                    }\r\n                return found;\r\n            };\r\n            return searcher(root);\r\n\r\n        };\r\n        /**\r\n         *\r\n         * @param {HTMLElement|string} HTMLElement\r\n         * @returns {number|Number}\r\n         * @constructor\r\n         */\r\n        this.GetIndex = function (HTMLElement) {\r\n            HTMLElement = $this.Select(HTMLElement);\r\n            return Array.prototype.slice.call( HTMLElement.parentElement.children ).indexOf(HTMLElement);\r\n        };\r\n        /**\r\n         *\r\n         * @param {string} eventName\r\n         * @param {string} selector\r\n         * @param {function} func\r\n         * @constructor\r\n         */\r\n        this.AddEventListener = function (eventName, selector, func) {\r\n            Monsieur.AddEventListenerGlobal(eventName,selector,func, $this.Content)\r\n        };\r\n\r\n\r\n        //extra properties\r\n        Props.call(this);\r\n        //extra getters/setters\r\n        for(let k in GetSet){\r\n            Object.defineProperty($this, k, Object.getOwnPropertyDescriptor(GetSet, k));\r\n        }\r\n        //extra methods\r\n        Methods.call(this);\r\n        //--\r\n        this.Show = function(e) {\r\n            let style = window.getComputedStyle($this.Content);\r\n            let duration = eval(style.transitionDuration.replace('ms', '*1').replace('s', '*1000'));\r\n            let durationAni = eval(style.animationDuration.replace('ms', '*1').replace('s', '*1000'));\r\n            if (duration < durationAni)\r\n                duration = durationAni;\r\n            duration++;\r\n\r\n            if ($this.Type !== \"Untyped\" && !$this.isVisible)\r\n            {\r\n                Monsieur.ContentList[$this.Type].forEach((item) =>\r\n                {\r\n                    if ((item) !== $this)\r\n                        item.Hide();\r\n                });\r\n            }\r\n            if (Dialog){\r\n                $this.Content.classList.add('monsieur-dialog');\r\n                //    console.log('DialogWrapper', DialogWrapper);\r\n                if (DialogWrapper){\r\n                    $this.DialogWrapper = Monsieur.CreateElementFromString('<div class=\"dialog-wrapper\">');\r\n                    document.body.appendChild($this.DialogWrapper);\r\n                    $this.DialogWrapper.onclick = $this.Hide.bind($this);\r\n\r\n                    let zIndexWrapper = parseInt(window.getComputedStyle($this.DialogWrapper).zIndex);\r\n                    let zIndexContent = parseInt(window.getComputedStyle($this.Content).zIndex);\r\n                    if (Number.isNaN(zIndexContent) || zIndexContent < zIndexWrapper)\r\n                        $this.Content.style.zIndex = zIndexWrapper+1;\r\n                }\r\n\r\n                if (DialogBlur)\r\n                {\r\n                    $this.DialogWrapper.style.background = 'none';\r\n                    Monsieur.Select(DialogBlur).classList.add('monsieur-blur');\r\n                }\r\n                if (DialogAnimation){\r\n                    $this.Content.classList.add(DialogAnimation);\r\n                }\r\n            }\r\n            BeforeShow.call($this, e);\r\n            Shower.call($this, e);\r\n            $this.Content.style.display = '';\r\n            clearTimeout($this.__private.ToggleTimer);\r\n\r\n            if (Show !== null) {\r\n                $this.__private.ToggleTimer = setTimeout(function() {\r\n                    Show.call($this, e);\r\n                },duration);\r\n            }\r\n        };\r\n        this.Hide = function(e) {\r\n            if (this.Control)\r\n                this.Control.Disactive();\r\n            let style = window.getComputedStyle($this.Content);\r\n            let duration = eval(style.transitionDuration.replace('ms', '*1').replace('s', '*1000'));\r\n            let durationAni = eval(style.animationDuration.replace('ms', '*1').replace('s', '*1000'));\r\n            if (duration < durationAni)\r\n                duration = durationAni;\r\n            duration++;\r\n            if (Dialog)\r\n            {\r\n                if ($this.DialogWrapper)\r\n                    $this.DialogWrapper.remove();\r\n                if (DialogBlur)\r\n                    Monsieur.Select(DialogBlur).classList.remove('monsieur-blur');\r\n            }\r\n\r\n            Hider.call($this, e);\r\n            clearTimeout($this.__private.ToggleTimer);\r\n            if (Hide !== null)\r\n                $this.__private.ToggleTimer = setTimeout(function () {\r\n                    Hide.call($this, e);\r\n                }, duration);\r\n\r\n        };\r\n        this.Toggle = function(e){\r\n            if ($this.isVisible)\r\n                $this.Hide(e);\r\n            else\r\n                $this.Show(e);\r\n        };\r\n\r\n        this.__private = {};\r\n        this.__private.ToggleTimer = null;\r\n        this.__private.ContentNames = [];\r\n\r\n        //### CONSTRUCTION\r\n\r\n\r\n        this.Control = new MonsieurControl(Control, $this);\r\n        this.Content.onclick = OnClick? OnClick.bind($this) : null;\r\n        //SubContent\r\n        if (Array.isArray(SubContent)){\r\n            for (let i = 0; i < SubContent.length; i++){\r\n                {\r\n                    if (!SubContent[i].Parent)\r\n                        SubContent[i].Parent = $this;\r\n                    $this.__private.ContentNames.push(SubContent[i].Name);\r\n                    $this[SubContent[i].Name] = new MonsieurContent( SubContent[i] );\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (let cname in SubContent){\r\n                SubContent[cname].Parent = $this;\r\n                SubContent[cname].Name = cname;\r\n                $this.__private.ContentNames.push(cname);\r\n                $this[cname] = new MonsieurContent(SubContent[cname]);\r\n            }\r\n        }\r\n\r\n        if ( (Type === \"Untyped\" && Visible !== false) && !Dialog)\r\n            Visible = true;\r\n        else if ( (Type !== \"Untyped\" && Visible !== true) || ( Dialog && Visible !== true) )\r\n            Visible = false;\r\n        //if (Typed) Content is Visible\r\n        if (Visible){\r\n            this.Content.style.display = '';\r\n            if (this.Control)\r\n                this.Control.Active();\r\n        }\r\n        else { //not undefined\r\n            this.Content.style.display = 'none';\r\n        }\r\n        if (Controller){\r\n            if (Controller.isController){\r\n                this.Controller = Controller;\r\n                this.Controller.Parent = this;\r\n            }\r\n            else{\r\n                if (!Controller.Target)\r\n                    Controller.Target = this.Content;\r\n                if (!Controller.Type)\r\n                    Controller.Type = Templator;\r\n                Controller.Parent = this;\r\n                this.Controller = new Controller.Type(Controller);\r\n            }\r\n            if (this.Controller.isHasEditable)\r\n            {\r\n                Monsieur._EditablesEventListenerRun($this.Content);\r\n            }\r\n        }\r\n        if (!Monsieur.ContentList[$this.Type]) //if list is empty, create it, else just add\r\n            Monsieur.ContentList[$this.Type] = [];\r\n        Monsieur.ContentList[$this.Type].push(this);\r\n\r\n        //close button\r\n        Array.from(this.Content.children).forEach(function(item){\r\n            if (item.classList.contains(\"close\"))\r\n                item.onclick = function (e) {\r\n                    $this.Hide(e);\r\n                }\r\n        });\r\n\r\n        setTimeout(function () {\r\n            AfterBuild.call($this);\r\n        }, 1);\r\n    }\r\n    get isVisible(){\r\n        return Monsieur.isVisible(this.Content);\r\n    }\r\n    get Title(){\r\n        return this.TitleContent.innerHTML;\r\n    }\r\n    set Title(t){\r\n        this.TitleContent.innerHTML = t;\r\n    }\r\n    get Data(){\r\n        if (this.Controller)\r\n            return this.Controller.Data;\r\n        return null;\r\n    }\r\n    set Data(data){\r\n        if (this.Controller)\r\n            this.Controller.Data = data;\r\n    }\r\n    get Items(){\r\n        if (this.Controller)\r\n            return this.Controller.Items;\r\n        return null;\r\n    }\r\n    RefreshOne(i){\r\n        if (this.Controller)\r\n            this.Controller.RefreshOne(i);\r\n    }\r\n    Remove(i, removeData){\r\n        if (this.Controller)\r\n            this.Controller.Remove(i, removeData);\r\n    }\r\n    Add(itemData, extraclass = false, isPrepend = false, addData = true){\r\n        if (this.Controller)\r\n            this.Controller.Add(itemData, extraclass, isPrepend, addData);\r\n    }\r\n    Edit(itemData, i){\r\n        if (this.Controller)\r\n            this.Controller.Edit(itemData, i);\r\n    }\r\n    Dispose(){\r\n        this.Content.remove();\r\n        this.Control.Disactive();\r\n        delete this.Controller;\r\n        delete this.Control;\r\n    }\r\n}\r\nclass MonsieurControl{\r\n    constructor(control, owner){\r\n        if (control === null)\r\n            return;\r\n        if (control.length > 0) //if control list not empty\r\n        {\r\n            let controls = this;\r\n            for (let i = 0; i < control.length; i++)\r\n            {\r\n                if (!control[i].Name)\r\n                    control[i].Name = \"unnamed_\" + Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 10);\r\n                controls[control[i].Name] = {\r\n                    Content: Monsieur.SelectAll(control[i].Target),\r\n                    _Content: control[i].Target,\r\n                    Type: control[i].Type ? control[i].Type : \"Untyped\",\r\n                    isGlobal: control[i].Global,\r\n                    OnClick: control[i].OnClick ? control[i].OnClick : owner.Show,\r\n                    OnChange: control[i].OnChange,\r\n                    Active: function(){\r\n                        Monsieur.SelectAll(control[i].Target).forEach(function (item) {\r\n                            item.classList.add('active');\r\n                        })\r\n                    },\r\n                    Disactive: function(){\r\n                        Monsieur.SelectAll(control[i].Target).forEach(function (item) {\r\n                            item.classList.remove('active');\r\n                        });\r\n                    }\r\n\r\n                };\r\n                //onclick\r\n                controls[control[i].Name].Content.forEach(function (item) {\r\n                    item.classList.add('pointer');\r\n                });\r\n                if (control[i].Global){\r\n\r\n                    Monsieur.AddEventListenerGlobal('click', control[i].Target, function (e) {\r\n                        Monsieur.SelectAll(control[i].Target).forEach(function (item) {\r\n                            item.classList.remove('active');\r\n                        });\r\n                        e.target.classList.add('active');\r\n                        if (controls[control[i].Name].OnClick)\r\n                            controls[control[i].Name].OnClick.call(owner, e);\r\n                    });\r\n                }\r\n                else{\r\n                    controls[control[i].Name].Content.forEach(function (item) {\r\n                        item.onclick = function (e) {\r\n                            Monsieur.ContentList[owner.Type].forEach((item) =>\r\n                            {\r\n                                if ((item) !== owner)\r\n                                {\r\n                                    if (item.Control)\r\n                                        item.Control.Disactive();\r\n                                }\r\n                            });\r\n                            //console.log('remover', e);\r\n                            controls[control[i].Name].Content.forEach(function (item) {\r\n                                item.classList.remove('active');\r\n                            });\r\n                            e.currentTarget.classList.add('active');\r\n                            controls[control[i].Name].OnClick.call(owner, e);\r\n                        };\r\n\r\n                    })\r\n                }\r\n\r\n                if (control[i].OnChange)\r\n                {\r\n                    if (control[i].Global){\r\n                        Monsieur.AddEventListenerGlobal('change', control[i].Target, function (e) {\r\n                            control[i].OnChange.call(owner, e);\r\n                        } )\r\n                    }\r\n                    else{\r\n                        controls[control[i].Name].Content.forEach(function (item) {\r\n                            item.onchange = function (e) {\r\n                                control[i].OnChange.call(owner, e);\r\n                            };\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    Active(type = \"Untyped\"){\r\n        for (let k in this)\r\n            if (this[k].Type === type)\r\n                this[k].Content.forEach(function (item) {\r\n                    item.classList.add('active')\r\n                })\r\n    }\r\n    Disactive(type = \"Untyped\"){\r\n        for (let k in this)\r\n            if (this[k].Type === type)\r\n            {\r\n                this[k].Content.forEach(function (item) {\r\n                    item.classList.remove('active');\r\n                });\r\n                if (this[k].isGlobal)\r\n                    Monsieur.SelectAll(this[k]._Content).forEach(function(item){\r\n                        item.classList.remove('active');\r\n                    })\r\n            }\r\n\r\n    }\r\n}\r\nclass Templator{\r\n    constructor(\r\n        {\r\n            Target = null,                              //{HTMLelement}\r\n            Data = [],                                  // {object}, {array} - if object Templator would be refresh, if array - rebuild\r\n            ListElement = \".list_element\",              //{string} - css selector or dom string\r\n            //ListElementOnClick = null,                //{function} -\r\n            EmptyMessage = \"\",\r\n            EmptyHide = false,      //{bool} - Templator.Content would be hidden if Data.length = 0\r\n            //DataType = \"untyped\",  //--BAD EXPERIENCE-- ODO when refresh one of typed Templator, would be refreshed/added/removed all of same type Templators (exclude untyped ofcourse)\r\n\r\n            PageSize = -1,\r\n            DataCount = -1,         //if > 0 PageGet is requied!!!\r\n            PageGet = null,         //{function} - requied if DataCount > 0\r\n\r\n            ShowAllButton = true,\r\n\r\n            LineSave = function(property, newValue, callback=()=>{}){setTimeout(()=>{callback()}, 500)},            // callback would remove editable-waiting css class;\r\n            LineAdd = function(dataObject, callback=()=>{}){setTimeout(()=>{ callback()}, 500)},                     // callback would remove editable-waiting css class;\r\n\r\n            NoAnimation = false,    //TODO\r\n            NoBuild = false,\r\n\r\n            BeforeBuild = function(){},\r\n            AfterBuild = function(){},\r\n            AfterAdd = function(){},\r\n            Parent = null           //MonsieurContent, which owns this Controller\r\n\r\n        } = {})\r\n    {\r\n        //### DEFINES\r\n        let $this = this;\r\n        this.isController = true;\r\n        if (Parent !== null)\r\n            this.Content = Monsieur.Select(Target, Parent.Content);\r\n        else\r\n            this.Content = Monsieur.Select(Target);\r\n        this.Target = this.Content;\r\n        this._Data = Data;\r\n        this.EmptyMessage = EmptyMessage;\r\n        this.ListElement = \"\";\r\n\r\n        this.BeforeBuild = BeforeBuild.bind(this);\r\n        this.AfterBuild = AfterBuild.bind(this);\r\n        this.AfterAdd = AfterAdd.bind(this);\r\n        this.Parent = Parent;\r\n        //paginating\r\n        this.PageSize = PageSize;\r\n        this._PageSize = PageSize;\r\n        this._DataCount = DataCount > 0 ? DataCount : this._Data.length ;\r\n        this._PageCursor = 0;\r\n        this._PageGet = PageGet;\r\n\r\n        //server handling\r\n        this.LineAdd = LineAdd;\r\n        this.LineSave = LineSave;\r\n        this.Type = null; // Refresh or ItemList\r\n\r\n        //settings\r\n        this.isShowAllButton = ShowAllButton;\r\n        this.isNoAnimaton = NoAnimation;\r\n        this.isEmptyHide = EmptyHide;\r\n\r\n        //fields to refresh (for refresh type)\r\n        let Dictionary = [];\r\n        this._Dictionary = Dictionary;\r\n        const Refresher = function () {\r\n            //TODO refresh only changes\r\n            if (!$this._Data)\r\n                $this._Data = {};\r\n            for (let i = 0; i < Dictionary.length; i++)\r\n            {\r\n\r\n                for (let j = 0; j < Dictionary[i].fields.length; j++)\r\n                {\r\n                    let isAttribute = Dictionary[i].fields[j].Target.indexOf('attributes') > -1;\r\n                    let NewValue = Dictionary[i].fields[j].BuildValue($this._Data);\r\n                    if (isAttribute)\r\n                    {\r\n\r\n                        Dictionary[i].obj.attributes[Dictionary[i].fields[j].Target.split(\".\")[1]].value = NewValue;\r\n                    }\r\n                    else {\r\n                        Dictionary[i].obj[Dictionary[i].fields[j].Target] = Dictionary[i].fields[j].BuildValue($this._Data);\r\n                    }\r\n\r\n                }\r\n            }\r\n        };\r\n        const Rebuilder = function () {\r\n            let lines = \"\";\r\n            $this.Content.style.display = '';\r\n            if ($this._PageCursor === 0 )\r\n                $this.Content.querySelectorAll('.mt-line, .mt-paginator, .mt-empty').forEach(function(item) {item.remove();});\r\n            //pagination check\r\n            let NextCount;\r\n            //let line;\r\n            let Limit = $this._Data.length;\r\n            if ($this.PageSize > 0)\r\n            {\r\n                let paginator = $this.Content.querySelector('.mt-paginator');\r\n                if (paginator !== null)\r\n                    paginator.remove();\r\n                Limit = parseInt($this._PageCursor) + parseInt($this.PageSize);\r\n                if (Limit > $this._DataCount)\r\n                    Limit = $this._DataCount;\r\n                //how much will be load in next step\r\n                NextCount = $this._DataCount - Limit;\r\n                if (NextCount > $this.PageSize)\r\n                    NextCount = $this.PageSize;\r\n            }\r\n            if ($this.Type === \"ItemList\" && $this._Data.length === 0 && $this.EmptyMessage !== \"\" && !$this.isEmptyHide)\r\n            {\r\n                let tag = $this.ListElement.match(/\\s?([\\w]+) /)[0].replace(/\\s/g, \"\");\r\n                let empty = document.createElement(tag);\r\n                empty.classList.add('mt-empty');\r\n                empty.innerHTML = $this.EmptyMessage;\r\n                $this.Content.appendChild(empty);\r\n                return;\r\n            }\r\n            else if ($this.Type === \"ItemList\" && $this._Data.length === 0 && $this.isEmptyHide){\r\n                $this.Content.style.display = 'none';\r\n                return;\r\n            }\r\n            else if ($this._Data.length === 0) {\r\n                return;\r\n            }\r\n            //linebuilding\r\n            for (let i = $this._PageCursor; i < Limit; i++)\r\n                lines += $this._LineBuilder($this._Data[i], i, $this._Data.length);\r\n            //appending\r\n            //   debugger;\r\n            if ($this.Content.children.length < 1)\r\n            {\r\n                $this.Content.innerHTML = lines;\r\n            }\r\n            else{\r\n                lines = Monsieur.CreateElementsFromString(lines, $this.Content.tagName);\r\n                if (lines !== null)\r\n                    lines.forEach(function (item) {\r\n                        $this.Content.appendChild(item);\r\n                    });\r\n            }\r\n            /*{\r\n             lines += $this._LineBuilder($this._Data[i], i, $this._Data.length);\r\n             //if should to save changed class list after rebuild\r\n             if (data[i] && data[i].$classlist)\r\n             {\r\n             line = $(line);\r\n             line.attr('class', data[i].$classlist);\r\n             lines +=line[0].outerHTML;\r\n             }\r\n             else{\r\n             lines += line;\r\n             }\r\n             }*/\r\n            //save cursor index\r\n            if ($this.PageSize > 0)\r\n                $this._PageCursor = Limit;\r\n            //PAGINATION BUILD\r\n            //limit data case\r\n            if ($this.PageSize > 0 && $this._PageCursor < $this._DataCount){\r\n                let also;\r\n                let showAll = `<span>  (Не загружено ${($this._DataCount- $this._PageCursor)}) </span>`;\r\n                if ($this.isShowAllButton)\r\n                {\r\n                    showAll = `<span> или </span><span class=\"mt-btn-nextAll dotted pointer\"> Все ( ${($this._DataCount - $this._PageCursor)} )</span>`;\r\n                }\r\n                let isTable = $this.Content.tagName === 'table' || $this.Content.tagName === 'thead' || $this.Content.tagName === 'tbody';\r\n                if (isTable)\r\n                {\r\n                    let colspan = $this.Content.querySelector(\"tr:first-child th\").length + 1;\r\n\r\n                    also = `<tr class=\"mt-paginator\"><td colspan=\"${colspan}\" class=\"element block-head\"><span class=\"tpltr-next dotted pointer\">Показать еще ${NextCount}</span>${showAll}</td></tr>`;\r\n                    also = Monsieur.CreateElementFromString(also, $this.Content.tagName);\r\n                }\r\n                else {\r\n                    also = Monsieur.CreateElementFromString(`<div class='mt-paginator'><span class=\"mt-btn-next dotted pointer\">Показать еще ${NextCount}</span>${showAll}</div>`);\r\n\r\n                }\r\n                let btnNext = also.querySelector('.mt-btn-next');\r\n                //console.log('btnNext', btnNext);\r\n                btnNext.onclick = function(){\r\n                    if ($this._PageCursor >= $this._Data.length)\r\n                        $this._PageGet($this._PageCursor, $this.PageSize, BuildWithIt);\r\n                    else\r\n                        Build();\r\n\r\n                };\r\n                let btnNextAll = also.querySelector('.mt-btn-nextAll');\r\n                btnNextAll.onclick = function(){\r\n                    $this.PageSize = $this._DataCount;\r\n                    if ($this._PageGet !== null)\r\n                        $this._PageGet($this._PageCursor, ($this._DataCount - $this._PageCursor), BuildWithIt);\r\n                    else\r\n                        Build();\r\n                };\r\n                $this.Content.appendChild(also);\r\n\r\n            }\r\n\r\n        };\r\n        const Build = function () {\r\n            $this.BeforeBuild();\r\n\r\n            if ($this.Type === \"Refresh\")\r\n                Refresher();\r\n            else if ($this.Type === \"ItemList\"/* && $this._Data.length > 0*/)\r\n                Rebuilder();\r\n\r\n\r\n            $this.AfterBuild();\r\n        };\r\n        const BuildWithIt = function (data) {\r\n            for (let i = 0; i < data.length; i++)\r\n                $this._Data.push(data[i]);\r\n            Build();\r\n        };\r\n\r\n\r\n        //#### METHODS\r\n        this.FieldAdd = function (element) {\r\n            let elemAttributes = element.attributes;\r\n            let fields = [];\r\n            let WhatFields = -1; // 0-att only, 1-innerHTML only, 2-both\r\n            //find fields in attributes\r\n            for (let i = 0; i < elemAttributes.length; i++)\r\n            {\r\n                if (elemAttributes[i].value.indexOf(\"{{\") > -1)\r\n                {\r\n                    if (elemAttributes[i].name !== 'value')\r\n                        fields.push({\r\n                            Target: 'attributes.'+elemAttributes[i].name,\r\n                            BuildValue: Monsieur.Compile(elemAttributes[i].value)\r\n                        });\r\n                    else {\r\n                        fields.push({\r\n                            Target: elemAttributes[i].name,\r\n                            BuildValue: Monsieur.Compile(elemAttributes[i].value)\r\n                        });\r\n                    }\r\n                    WhatFields = 0;\r\n                }\r\n            }\r\n            //innerHTML check\r\n            if (element.childNodes.length < 2)\r\n            {\r\n                if (element.innerHTML.indexOf(\"{{\") > -1)\r\n                {\r\n                    fields.push({\r\n                        Target: \"innerHTML\",\r\n                        BuildValue: Monsieur.Compile(element.innerHTML)\r\n                    });\r\n                    WhatFields = WhatFields !==0 ? 1:2; //1 if no att, 2 if att exists\r\n\r\n                }\r\n\r\n            }\r\n            if (WhatFields > -1)\r\n            {\r\n                Dictionary.push( {\r\n                    obj: element,\r\n                    fields: fields\r\n                } );\r\n            }\r\n        };\r\n        this.Refresh = function(data = null, index = null){\r\n            $this.PageSize = $this._PageSize;\r\n            $this._PageCursor = 0;\r\n            if (data !== null)\r\n                $this._Data = data;\r\n            $this.PageCursor = 0;\r\n            if (index === null)\r\n                Build();\r\n            else\r\n                $this.RefreshOne(index);\r\n        };\r\n        this.RefreshOne = function (i) {\r\n            let newItem = Monsieur.CreateElementFromString($this._LineBuilder($this._Data[i], i, $this._Data.length));\r\n       //     console.log('$this.Items[i] old', $this.Items[i]);\r\n        //    console.log('$this.Items[i] new', newItem);\r\n            let itemOld = $this.Items[i];\r\n            $this.Items[i].parentNode.replaceChild(newItem, itemOld);\r\n        };\r\n        this.Add = function(item, extraclass = false, isPrepend = false, addData = true){\r\n            if ($this._Data.length === 0 && $this.Content.querySelector(\".mt-empty\") !== null)\r\n                $this.Content.querySelector(\".mt-empty\").remove();\r\n            let fragment = document.createDocumentFragment();\r\n            let elem = document.createElement($this.Content.tagName);\r\n            let i;\r\n            if (!isPrepend)\r\n            {\r\n                i = $this._Data.length;\r\n                if (!addData)\r\n                    i--;\r\n                elem.innerHTML = $this._LineBuilder(item, i, i+1);\r\n                while (elem.childNodes[0]) {\r\n                    fragment.appendChild(elem.childNodes[0]);\r\n                }\r\n                if (extraclass)\r\n                    fragment.children[0].classList.add(extraclass);\r\n                if (addData)\r\n                    $this._Data.push(item);\r\n                $this.Content.appendChild(fragment);\r\n            }\r\n            else{\r\n                i = 0;\r\n                //change data-line attributes\r\n                $this.Items.forEach(function (item) {\r\n                    console.log(item);\r\n                    console.log(item.dataset['line']);\r\n                    item.dataset['line'] =  parseInt( item.dataset['line'] ) + 1;\r\n                });\r\n                //TODO rendered indexes not changings\r\n\r\n                elem.innerHTML =  $this._LineBuilder(item, 0, $this._Data.length+1);\r\n                while (elem.childNodes[0]) {\r\n                    fragment.appendChild(elem.childNodes[0]);\r\n                }\r\n                if (extraclass)\r\n                    fragment.children[0].classList.add(extraclass);\r\n                if (addData)\r\n                    $this._Data.unshift(item);\r\n                $this.Content.prepend(fragment);\r\n            }\r\n            //server saver\r\n            if ($this.LineAdd !== null)\r\n            {\r\n                $this.LineAdd(item);\r\n            }\r\n            $this.AfterAdd(item, i);\r\n        };\r\n        this.Edit = function (itemData, i){\r\n            console.log('edit this', $this);\r\n            $this._Data[i] = itemData;\r\n            $this.Refresh(null, i);\r\n        };\r\n        /**\r\n         *\r\n         * @param {int} index\r\n         * @param {bool} removeData\r\n         * @constructor\r\n         */\r\n        this.Remove = function(index, removeData = true){\r\n            //TODO rendered indexes not changings\r\n            $this.Content.querySelector(`.mt-line[data-line=\"${index}\"]`).remove();\r\n            for (let j = index; j < $this.Items.length; j++){\r\n                $this.Items[j].dataset['line'] =  parseInt( $this.Items[j].dataset['line'] ) - 1;\r\n                $this.Items[j].querySelectorAll('[data-line]').forEach(function (item) {\r\n                    item.dataset['line'] = parseInt( item.dataset['line'] ) - 1;\r\n                })\r\n            }\r\n            if (removeData)\r\n                $this._Data.splice(index, 1);\r\n            if ($this._Data.length === 0)\r\n                $this.Refresh();\r\n        };\r\n\r\n        //### CONSTRUCTOR\r\n        if ( Array.isArray(this._Data) ){\r\n            this.Type = \"ItemList\";\r\n            const isListElementCssSelector = ListElement.match(/^[a-zA-Z0-9.,\\-_ *#]+$/g) !== null;\r\n            if (isListElementCssSelector){\r\n                let element = this.Content.querySelector(ListElement);\r\n                element.classList.add('mt-line');\r\n                ListElement = element.outerHTML;\r\n                element.remove();\r\n            }\r\n            else{\r\n                let list_element = ListElement.match(/<[^>]+>/)[0];\r\n                let list_elementClassed;\r\n                let pos = list_element.indexOf('class=\"');\r\n                if (pos < 0)\r\n                {\r\n                    list_elementClassed = list_element.substr(0,list_element.length - 1) + ' class=\"mt-line\"' + list_element.substr(list_element.length-1);\r\n                }\r\n                else\r\n                {\r\n                    pos = list_element.indexOf('\"', pos+8);\r\n                    list_elementClassed = list_element.substr(0,pos) + \" mt-line\" + list_element.substr(pos);\r\n                }\r\n                ListElement = ListElement.replace(list_element, list_elementClassed);\r\n            }\r\n            //add data-line attribute\r\n            ListElement = ListElement.replace(/<[\\s\\S]+?(>)/, function (a, b) {\r\n                return a.replace(b, ' data-line=\"{{i}}\">')\r\n            });\r\n            this.ListElement = ListElement;\r\n            this._LineBuilder = Monsieur.Compile(ListElement, true);\r\n            if (ListElement.match(/<[^>]+class=['\"][\\w\\d\\s-]*(editable)[\\w\\d\\s-]*['\"][^>]*>([^<]*)<[^>]*>/) !== null)\r\n                this.isHasEditable = true;\r\n            this.Content.MonsieurController = this;\r\n            this.Content.classList.add('mt-content');\r\n\r\n        }\r\n        else {\r\n            this.Type = \"Refresh\";\r\n            let AllChildren = Array.prototype.slice.call( this.Content.querySelectorAll('*:not(g):not(path):not(clipPath):not(text):not(br)'));\r\n            AllChildren.push( this.Content);\r\n            AllChildren.forEach(function (item) {\r\n                $this.FieldAdd(item);\r\n            })\r\n        }\r\n        Monsieur.TemplatorList.push(this);\r\n        if (!NoBuild)\r\n            Build();\r\n    }\r\n    get Data(){\r\n        return this._Data;\r\n    }\r\n    set Data(data){\r\n        this._Data = data;\r\n    }\r\n    get Items(){\r\n        return this.Content.querySelectorAll('.mt-line');\r\n    }\r\n}\r\nclass TreeBuilder{\r\n    constructor(\r\n        {\r\n            Target = null,                          //{string, HTMLElement}\r\n            Data = [],\r\n            ListElement = null,\r\n            Drop = false,                       //{bool}   - horisontal menu with drop down subtrees;\r\n            SubSelector = null,                 //{string} - cssselector of element, where put branches\r\n            SubSelectorHandler = function(){},  //{function} - click handle on SubSelector Element (hide/show branch for exaple)\r\n\r\n            BeforeBuild = function(){},\r\n            AfterBuild = function(){},\r\n\r\n            Parent = null               //MonsieurContent, which owns this Controller\r\n        }\r\n    )\r\n    {\r\n        //### DEFINES\r\n        this.isController = true;\r\n        this.Content = Monsieur.Select(Target);\r\n        this.Target = this.Content;\r\n        this.Parent = Parent;\r\n        this._Data = Data;\r\n        this.SubSelector = SubSelector;\r\n        this.SubSelectorHandler = SubSelectorHandler.bind(this);\r\n        this.BeforeBuild = BeforeBuild.bind(this);\r\n        this.AfterBuild = AfterBuild.bind(this);\r\n        let SubTreeClass = Drop ? 'mtb-sub_tree dropable':'mtb-sub_tree';\r\n        let Lvl = 0;\r\n        let Branch = ListElement === null ? this.Content.innerHTML : ListElement;\r\n        if (this.SubSelector === null){\r\n            this.SubSelector = '.mtb-sub_tree';\r\n            Branch = Branch.replace(/^([\\s\\S]*)(<\\/\\w+>)$/, function (match, html, entag) {\r\n                entag = `<div class=\"${SubTreeClass}\"></div>${entag}`;\r\n                return html+entag\r\n            })\r\n        }\r\n        this.LineBuilder = Monsieur.Compile(Branch, true);\r\n        let $this = this;\r\n\r\n        let Index = 0;          //unque serial number of branch\r\n\r\n        let BuildElement = function(obj, key, indexJ) {\r\n            Index++;\r\n            let extra = {\r\n                $lvl: Lvl,\r\n                $key: key,\r\n                $index: Index,\r\n                $j: indexJ\r\n            };\r\n            let line = Monsieur.CreateElementFromString($this.LineBuilder(obj, Index, null, extra));\r\n            line.classList.add('mtb-branch');\r\n            for (let key in obj)\r\n            {\r\n                let ObjItem = obj[key];\r\n                if (Array.isArray(ObjItem))\r\n                {\r\n                    Lvl++;\r\n                    for (let i = 0; i < ObjItem.length; i++)\r\n                    {\r\n                        if ($this.SubSelector === null)\r\n                        {\r\n                            line.appendChild(  BuildElement(ObjItem[i], key, i) );\r\n                        }\r\n                        else\r\n                        {\r\n                            line.classList.add('mtb-has_tree');\r\n                            if (Drop)\r\n                                line.classList.add('dropable');\r\n                            let sub = line.querySelector($this.SubSelector);\r\n                            sub.appendChild(  BuildElement(ObjItem[i], key, i) );\r\n                        }\r\n                    }\r\n                    Lvl--;\r\n                }\r\n            }\r\n            return line;\r\n        };\r\n        let Build = function () {\r\n            $this.BeforeBuild();\r\n            if (Array.isArray($this._Data))\r\n            {\r\n                $this.Content.innerHTML = '';\r\n                Lvl++;\r\n                for (let j = 0; j < $this._Data.length; j++)\r\n                    $this.Content.appendChild(  BuildElement($this._Data[j], \"root\", 0) );\r\n                Lvl--;\r\n            }\r\n            else{\r\n                $this.Content.appendChild(BuildElement($this._Data, \"root\", 0));\r\n            }\r\n            Lvl = 0;\r\n            Index = 0;\r\n            $this.AfterBuild();\r\n\r\n        };\r\n\r\n        Build(this._Data);\r\n\r\n        //### METHODS\r\n        this.Refresh = function (data=$this._Data) {\r\n            $this._Data = data;\r\n            Build();\r\n        }\r\n\r\n    }\r\n    get Data(){\r\n        return this._Data;\r\n    }\r\n    set Data(data){\r\n        this._Data = data;\r\n    }\r\n}\r\n\r\n//Tutorial\r\n//TargetButton = {string, HTMLElement} - button who start the tutor\r\n//TargetContent = {string, HTMLElement} - select/element where search tutors\r\nclass MonsieurTutor{\r\n    constructor(TargetButton = null, TargetContent = null){\r\n        //### DEFINES\r\n        let $this = this;\r\n        this.TargetButton = Monsieur.Select(TargetButton);\r\n        this.TargetContent = Monsieur.Select(TargetContent);\r\n        const MT = `<div class=\"monsieur-tutor\">\r\n        <div class=\"cd-caption\">\r\n            <span>Шаг </span>\r\n            <span class=\"monsieur-tutor_step\"></span>\r\n        </div>\r\n        <div class=\"monsieur-tutor_desc\"></div>\r\n        <div class=\"monsieur-tutor_btns\">\r\n            <button class=\"button btn-tutor element btn-tutor-stop\">Прервать обучение</button>\r\n            <button class=\"button btn-tutor element btn-tutor-next\">Далeе →</button></div>\r\n        </div>`;\r\n        this.Content = Monsieur.CreateElementFromString(MT);\r\n        this.ContentBG = Monsieur.CreateElementFromString('<div class=\"monsieur-tutor-bg dialog-wrapper\"></div>');\r\n        this.Content.style.display = 'none';\r\n        this.ContentBG.style.display = 'none';\r\n        this._Description = this.Content.querySelector('.monsieur-tutor_desc');\r\n        this._Step = this.Content.querySelector('.monsieur-tutor_step');\r\n        this._ButtonNext = this.Content.querySelector('.btn-tutor-next');\r\n        this._ButtonStop = this.Content.querySelector('.btn-tutor-stop');\r\n\r\n        $this.Data = [];\r\n        const ButtonNextText = this._ButtonNext.innerHTML;\r\n        let TutorPosition = 0;\r\n        /*get transparent*/\r\n        let temp = document.createElement('div');\r\n        temp.style.display = 'none';\r\n        document.body.appendChild(temp);\r\n        const ColorTransparent = window.getComputedStyle(temp).backgroundColor;\r\n        temp.remove();\r\n        //---\r\n        const ElemCssRestore = function () {\r\n            let Element = $this.Data[TutorPosition-1].obj;\r\n            if (Element.tagName.toLowerCase() !== 'tr')\r\n            {\r\n                Element.style.zIndex = '';\r\n                Element.style.position = '';\r\n                Element.style.outline = '';\r\n                Element.style.display = '';\r\n                Element.style.backgroundColor = '';\r\n                return;\r\n            }\r\n            let nElements = Element.querySelectorAll('th, td');\r\n            nElements.forEach(function (elem) {\r\n                elem.style.position = '';\r\n                elem.style.zIndex = '';\r\n            });\r\n        };\r\n        const ElemCssSet = function (Element) {\r\n            if (Element.tagName.toLowerCase() !== 'tr')\r\n            {\r\n                Element.style.zIndex = '11';\r\n                Element.style.position = 'relative';\r\n                Element.style.outline = '5px #bee0ff solid';\r\n                let style = window.getComputedStyle(Element);\r\n                if (style.backgroundColor === ColorTransparent)\r\n                    Element.style.backgroundColor = \"#fff\";\r\n                if (!Monsieur.isVisible(Element) )\r\n                {\r\n                    if (Element.tagName.toLowerCase() !== \"table\" )\r\n                        Element.style.display = 'block';\r\n                    else\r\n                        Element.style.display = 'table';\r\n                }\r\n               /* if (Element.length > 1)\r\n                    Element.eq(1).css({zIndex: '', outline: ''});*/\r\n                return;\r\n            }\r\n            let nElements = Element.querySelectorAll('th, td');\r\n            nElements.forEach(function (elem) {\r\n                elem.style.zIndex = \"11\";\r\n                elem.style.position = \"relative\";\r\n                let style = window.getComputedStyle(elem);\r\n                if (style.backgroundColor === ColorTransparent){\r\n                    elem.style.backgroundColor = \"#fff\";\r\n                }\r\n            });\r\n           /* if (Element.length > 1)\r\n                Element.eq(1).css({zIndex: '', outline: ''});*/\r\n        };\r\n        const Run = function () {\r\n            console.log(\"tutor run\");\r\n            if ($this.TargetContent === null)\r\n                return;\r\n            let Items = $this.TargetContent.querySelectorAll('*[data-tutor]:not([data-line]), *[data-tutor][data-line=\"0\"]');\r\n            if (Items.length < 1){\r\n                Monsieur.Confirm(\"Сообщение\", \"На этом экране нет подсказок\");\r\n                return;\r\n            }\r\n           // document.body.style.position = 'relative';\r\n\r\n            Items.forEach(function (item) {\r\n                $this.Data.push({\r\n                    obj: item,\r\n                    desc: item.dataset['tutor']\r\n                })\r\n            });\r\n            $this.Content.style.display = '';\r\n            $this.ContentBG.style.display = '';\r\n            GoStep();\r\n        };\r\n        const GoStep = function () {\r\n            //restore prev element's css\r\n            if (TutorPosition > 0)\r\n                ElemCssRestore();\r\n            if (TutorPosition === $this.Data.length)\r\n            {\r\n                Stop();\r\n                return;\r\n            }\r\n            //select next elem\r\n            let Element = $this.Data[TutorPosition].obj;\r\n            let ElementDesc = $this.Data[TutorPosition].desc;\r\n            // check for invisible parent\r\n            let ElemParent = ElementDesc.match(/{([\\s\\S]+)}/);\r\n            if (ElemParent !== null)\r\n            {\r\n                ElemParent = ElemParent[1];\r\n                ElementDesc = ElementDesc.replace(/{([\\s\\S]+)}/, '');\r\n                Element = Element.closest(ElemParent);\r\n                $this.Data[TutorPosition].obj = Element;\r\n                //Element.push( );\r\n            }\r\n            //set element visible\r\n            ElemCssSet(Element);\r\n            //write new element title and desc\r\n            $this._Step.innerHTML = (TutorPosition+1) + \"/\"+$this.Data.length;\r\n            $this._Description.innerHTML = ElementDesc;\r\n            //caption next button\r\n            if ((TutorPosition+1) === $this.Data.length)\r\n            {\r\n                $this._ButtonNext.innerHTML = 'Завершить';\r\n                $this._ButtonStop.style.opacity = '0';\r\n            }\r\n\r\n            //move tutor desc box\r\n            let posX = Element.offsetLeft + Element.clientWidth + 10;\r\n            let posY = Element.offsetTop - $this.Content.clientHeight - 10;\r\n            if (posY < 10)\r\n                posY = 10;\r\n            if ( (posX + $this.Content.clientWidth) > window.innerWidth )\r\n            {\r\n                posX = Element.offsetLeft - $this.Content.clientWidth - 10;\r\n                if (window.innerWidth < $this.Content.clientWidth + Element.clientWidth)\r\n                {\r\n                    posX = Element.offsetLeft + Element.clientWidth - $this.Content.clientWidth - 20;\r\n                }\r\n\r\n            }\r\n            if (document.documentElement.scrollTop  > posY || document.documentElement.scrollTop + window.innerHeight < Element.offsetTop + Element.offsetHeight)\r\n            {\r\n                //$('html, body').animate({scrollTop: posY - 10}, 300);\r\n                document.documentElement.scrollTop =  (posY - 10)  +'px';\r\n            }\r\n            if (posX < 10)\r\n                posX = 10;\r\n            $this.Content.style.left = posX +'px';\r\n            $this.Content.style.top = posY +'px';\r\n\r\n            TutorPosition++;\r\n        };\r\n        const Stop = function () {\r\n       //     document.body.style.position = '';\r\n            ElemCssRestore();\r\n            $this.Content.style.display = 'none';\r\n            $this.ContentBG.style.display = 'none';\r\n            $this._ButtonNext.innerHTML = ButtonNextText;\r\n            $this._ButtonStop.style.opacity = '';\r\n            TutorPosition = 0;\r\n            $this.Data = [];\r\n        };\r\n        //### CONSTRUCT\r\n\r\n        this.TargetButton.onclick = Run;\r\n        this._ButtonNext.onclick = GoStep;\r\n        this._ButtonStop.onclick = Stop;\r\n\r\n        document.body.appendChild(this.Content);\r\n        document.body.appendChild(this.ContentBG);\r\n\r\n        //### METHODS\r\n\r\n    }\r\n}\r\nclass MonsieurLoading{\r\n    constructor(\r\n        {\r\n            Target = 'body'\r\n        } = {}\r\n    ){\r\n        this.Target = Monsieur.Select(Target);\r\n        this.Content = Monsieur.CreateElementFromString(`<div class=\"ajax-loading\" style=\"display: none\">\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\">\r\n         <path d=\"\" id=\"monsieur-arc1\" fill=\"none\" stroke=\"#449b22\" stroke-width=\"5\"></path>\r\n         <path d=\"\" id=\"monsieur-arc2\" fill=\"none\" stroke=\"#61c8de\" stroke-width=\"5\"></path>\r\n         <path d=\"\" id=\"monsieur-arc3\" fill=\"none\" stroke=\"#761c19\" stroke-width=\"5\"></path>\r\n         <path d=\"\" id=\"monsieur-arc4\" fill=\"none\" stroke=\"#333333\" stroke-width=\"5\"></path>\r\n    </svg>\r\n</div>`);\r\n        this.Target.appendChild(this.Content);\r\n        function DoArc(id, cx, cy, radius, max){\r\n            // if (id == null) return;\r\n            let circle = document.getElementById(id);\r\n            let e = circle.getAttribute(\"d\");\r\n            let d = \" M \"+ (cx + radius) + \" \" + cy;\r\n\r\n            for (let angle =0; angle < max; angle++)\r\n            {\r\n                let radians= angle * (Math.PI / 180);  // convert degree to radians\r\n                let x = cx + Math.cos(radians) * radius;\r\n                let y = cy + Math.sin(radians) * radius;\r\n                d += \" L \"+x + \" \" + y;\r\n            }\r\n            circle.setAttribute(\"d\", d)\r\n        }\r\n        DoArc(\"monsieur-arc1\", 60, 60, 45, 160);\r\n        DoArc(\"monsieur-arc2\", 60, 60, 40, 130);\r\n        DoArc(\"monsieur-arc3\", 60, 60, 35, 100);\r\n        DoArc(\"monsieur-arc4\", 60, 60, 30, 70);\r\n\r\n        //\r\n        this.Timeout = null;\r\n    }\r\n    Show(){\r\n        let $this = this;\r\n        this.Content.style.display = '';\r\n        clearTimeout(this.TimeoutHide);\r\n        this.Timeout = setTimeout(function(){\r\n            $this.Content.style.display = 'block';\r\n        }, 70);\r\n    }\r\n    Hide(){\r\n        let $this = this;\r\n        clearTimeout(this.Timeout);\r\n        this.TimeoutHide = setTimeout(function(){\r\n            $this.Content.style.display = 'none';\r\n        }, 250); //hide may be called in same time as the show()\r\n    }\r\n}\r\nclass MonsieurTooltip{\r\n    constructor({\r\n                    Target    = document,           //Target-listener (global document by default)\r\n                    Attribute = \"data-tooltip\",     // data-tooltip=\"Help text here\"\r\n                    Delay     = 400,                //delay before tooltip show\r\n                    Time      = 1100,               //showing time\r\n                    Cursor    = \"help\",             //item:hover cursor\r\n                    Custom    = `<div class=\"monsieur-tooltip\">`,               //custom html of tooltip\r\n\r\n                })\r\n    {\r\n        let $this = this;\r\n        let ToolTip = Monsieur.CreateElementFromString(Custom);\r\n        let Timer = null;\r\n        let Destr = null;\r\n        this.Target = Monsieur.Select(Target);\r\n        function Show(text){\r\n            ToolTip.innerHTML = text;\r\n            $this.Target.appendChild(ToolTip);\r\n\r\n        }\r\n        $this.Target.querySelectorAll(`[${Attribute}]`).forEach(function (item) {\r\n            item.addEventListener('mouseover', function (e) {\r\n                let text = e.currentTarget.dataset[Attribute.replace('data-', '')];\r\n                clearTimeout(Destr);\r\n                Timer = setTimeout(function(){\r\n                    Show(text);\r\n                }, Delay);\r\n            });\r\n            item.addEventListener('mouseout', function () {\r\n                clearTimeout(Timer);\r\n                Destr = setTimeout(function () {\r\n                    ToolTip.remove();\r\n                }, Time)\r\n            })\r\n        });\r\n\r\n\r\n      /*  $(Target).find(`[${Attribute}]`).mouseover(function (e) {\r\n            let text = $(e.currentTarget).attr(Attribute);\r\n            clearTimeout(Destr);\r\n            Timer = setTimeout(function(){\r\n                Show(text);\r\n            }, Delay);\r\n        });\r\n        $(Target).find(`[${Attribute}]`).mouseout(function (e) {\r\n            clearTimeout(Timer);\r\n            Destr = setTimeout(function () {\r\n                Custom.remove();\r\n            }, Time)\r\n        })*/\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"sourceRoot":"/source/"}