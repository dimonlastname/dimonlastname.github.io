"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Monsieur=function(){var MonsieurClass=function(){function MonsieurClass(){_classCallCheck(this,MonsieurClass);var $this=this;this.Debug=!1,this.isEditableEventsEnabled=!1;var regexEach=new RegExp(/{{#each\s+([^}]+)}}/g),regexIfOuter=new RegExp(/{{#if\s+([^}]+)}}([\s\S]*?){{#endif}}/g),regexIfInner=new RegExp(/{{#if([\s\S]*?)}}/g),regexExpressions=new RegExp(/{{([^#}]+)}}/g),regexEditable=new RegExp(/<[^>]+class=['"][\w\d\s-]*(editable)[\w\d\s-]*['"][^>]*>([^<]*)<[^>]*>/g),spaces="\t",preCompileIfOuter=function(e){return e=e.replace(/#IF/g,"#if").replace(/#ENDIF/g,"#endif").replace(regexIfOuter,function(e,t,n){return'`+\n/* OUTER "IF" */\n(function($this){\n    if ('+preParseObjectChecker(t)+") {\n        return `"+n+"`;\n    }\n    return '';\n})($this)+`"})},preCompileIfInner=function(e){return e=e.replace(regexIfInner,function(e,t){return t=t.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/#less/g," < ").replace(/#more/g," > ").replace(/&amp;/g,"&").replace(/\|/g,'"'),'`+\n    /* LOCAL "IF" */\n    (function(){\n        return ('+t+"); \n        return '';})()+`"})},preCompileEach=function(e){e=e.replace(/{{#EACH/g,"{{#each").replace(/{{#ENDEACH/g,"{{#endeach");var t=e.match(regexEach),n=0;if(null!==t)for(var i=t.length-1;i>=0;i--){var r=t[i],o=!1;n++;var l=e.indexOf(r),a=e.indexOf("{{#endeach}}",l),s=e.slice(0,l).match(regexEach);s=null!==s?s.length:0;var u=e.slice(0,l).match(/{{#endeach}}/g);u=null!==u?u.length:0,s>u&&(o=!0,n=0);var d=e.slice(l,a+12),c=d.slice(r.length,d.length-12),h=r.replace(/{{#each\s+([\s\S]+)}}/,function(e,t){return t});h=preParseObjectChecker(h);var f="`+"+spaces.repeat(n)+"/* EACH */(function(inner, $parent){                                                                   \r\n"+spaces.repeat(n)+"    if (!inner || (Object.keys(inner).length === 0 && inner.constructor === Object && isNaN(inner)))   \r\n"+spaces.repeat(n)+'        return "";                                                                                     \r\n'+spaces.repeat(n)+'    let string_result= "";                                                                             \r\n'+spaces.repeat(n)+"    for(let j = 0; j < inner.length; j++){                                                             \r\n"+spaces.repeat(n)+"        let $this = inner[j];                                                                          \r\n"+spaces.repeat(n)+"        let o = inner[j];                                                                              \r\n"+spaces.repeat(n)+"        string_result += `"+preParse(c)+"`;                                               \r\n"+spaces.repeat(n)+"    }                                                                                                  \r\n"+spaces.repeat(n)+"    return string_result;                                                                              \r\n"+spaces.repeat(n)+"})("+h+', {$parent: typeof $parent !== "undefined"?$parent:null, $this: $this, i: i} ) +`                    ';e=e.replace(d,f)}return e},preCompileEditable=function(e){return e.replace(regexEditable,function(e,t,n){return e=e.replace(/<[\s\S]+?(>)/,function(e,t){return e.replace(t,' data-line="{{i}}" data-property="'+n.replace("{{","").replace("}}","")+'">')}),e.replace(n,'<div class="editable-helper editable-value">'+n+'</div><div class="editable-helper editable-icon"></div>')})},preParseObjectChecker=function(e){function t(e){var t=e.replace(/\s/g,""),n=t.indexOf("$item")>-1||t.indexOf("$this")>-1||t.indexOf("$parent")>-1,i=t.indexOf("$index")>-1||t.indexOf("$j")>-1||t.indexOf("$key")>-1||t.indexOf("$lvl")>-1,r="?"===t||t.indexOf("=")>-1||t.indexOf(">")>-1||t.indexOf("<")>-1,o=null!==t.match(/^"[\s\S]*"$/),l="i"===t||"j"===t,a=!isNaN(t);return n||i||l||a||o||r?e:"o."+t}return e=e.replace(/[^\s+\-\/%()*]+/g,function(e){var n=e.match(/&/g);if(null!==n){for(var i=0;i<n.length;i++)e=i<n.length-1?e.replace("&","$parent"):e.replace("&","$parent.$this");return e}return t(e)})},preParse=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.replace(regexExpressions,function(e,n){return t?"${"+preParseObjectChecker(n)+"}":"${"+n+"}"})};this.Compile=function(e,t){e=e.replace(/[\n]+/g," ").replace(/[ ]{3,}/g,""),e=e.replace(/'/g,"\\'"),t&&(e=preCompileEditable(e),e=preCompileIfOuter(e),e=preCompileEach(e)),e=preParse(e),e=preCompileIfInner(e);var n="\nlet $this = o;\nlet $item = o;\nlet $num = i+1;\nlet $denum = length-i;\n//treebuilder's\nlet $index;\nlet $key;\nlet $lvl;\nlet $j;\nif (extra){\n    $index = extra.$index;\n    $key = extra.$key;\n    $lvl = extra.$lvl;\n    $j = extra.$j;\n}\nlet string_Result = \"\";\nif (o === undefined || (Object.keys(o).length === 0 && o.constructor === Object && isNaN(o)) ) \n    return '';\nreturn `";n+=e+"`;",n=n.replace(/`/g,"'").replace(/\$\{([^}]*)\}/g,function(e,t){return"'+"+t+"+'"});var i=void 0;try{i=new Function("o","i","length","extra",n)}catch(r){console.info(n),console.error(r)}return i},this._EditablesEventListenerRun=function(e){$this.AddEventListenerGlobal("dblclick",".editable",function(e){$this.Editable.RemoveEdits(),$this.Editable.AddEdits(e.currentTarget)},e),$this.AddEventListenerGlobal("click",".editable-icon",function(e){$this.Editable.RemoveEdits(),$this.Editable.AddEdits(e.currentTarget.closest(".editable"))},e),$this.AddEventListenerGlobal("dblclick",".editable",function(e){$this.Editable.RemoveEdits(),$this.Editable.AddEdits(e.currentTarget)},e),$this.AddEventListenerGlobal("change",".editable-editor",function(e){},e),$this.AddEventListenerGlobal("keyup",".editable-textbox",function(e){if(13===e.keyCode)return $this.Editable.Save(e.currentTarget.closest(".editable"),e.currentTarget.value),!1;var t=e.currentTarget.value,n=e.currentTarget.parentElement.dataset.value;t!==n?e.currentTarget.parentElement.classList.add("editable-waiting"):e.currentTarget.parentElement.classList.remove("editable-waiting")},e),$this.AddEventListenerGlobal("click",".editable-save-button",function(e){var t=e.currentTarget.closest(".editable");$this.Editable.Save(e.currentTarget.closest(".editable"),t.querySelector(".editable-editor").value)},e),$this.isHasEditablesEventsEnabled||(document.addEventListener("click",function(e){e.target.classList.contains("editable-helper")&&null!==document.querySelectorAll(".editable-helper, .editable-editing")||$this.Editable.RemoveEdits()}),$this.isHasEditablesEventsEnabled=!0)},this.CreateElementFromString=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",n=document.createDocumentFragment(),i=document.createElement(t);for(i.innerHTML=e;i.childNodes[0];)n.appendChild(i.childNodes[0]);return n.childNodes[0]},this.CreateElementsFromString=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",n=document.createDocumentFragment(),i=document.createElement(t);for(i.innerHTML=e;i.childNodes[0];)n.appendChild(i.childNodes[0]);if(n.childNodes.length>0){for(var r=[],o=0;o<n.childNodes.length;o++)r.push(n.childNodes[o]);return r}return null},this.Select=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if("undefined"!=typeof e.tagName||e===document)return e;try{var n=null!==e.match(/^[a-zA-Z0-9.,\-_ \]\["=:*#]+$/g);return n?t.querySelector(e):null}catch(i){console.info("Monsieur.Select SelectorOrHTMLelement",e),console.info("Monsieur.Select e",i)}},this.SelectAll=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"undefined"!=typeof e.tagName||e===document?[e]:t.querySelectorAll(e)},this.AddEventListenerGlobal=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document;i.addEventListener(e,function(e){var r=e.target,o=!1,l=Monsieur._EventClone(e),a=i.querySelectorAll(t);if(a[0]===r&&(l.currentTarget=r,o=!0),!o)for(var s=0;s<a.length;s++)if(a[s].contains(r)){o=!0,l.currentTarget=r.closest(t);break}o&&n.call(l.currentTarget,l)})},this.isVisible=function(e){var t=function(e){var t=window.getComputedStyle(e);return"none"!==t.display&&"0"!==t.opacity&&"hidden"!==t.visibility&&((0!==parseInt(t.minWidth)&&"auto"!==t.minWidth||0!==parseInt(t.width))&&(0!==parseInt(t.minHeight)&&"auto"!==t.minHeight||0!==parseInt(t.height)))},n=function(e){for(;e.parentElement;){if(!t(e.parentElement))return!1;e=e.parentElement}return!0};return!!t(e)&&n(e)},this._EventClone=function(e){function t(){}var n=new t;for(var i in e){var r=Object.getOwnPropertyDescriptor(e,i);!r||r.writable&&r.configurable&&r.enumerable&&!r.get&&!r.set?n[i]=e[i]:Object.defineProperty(n,i,r)}return Object.setPrototypeOf(n,e),n},this.Editable={RemoveWaiting:function(){var e=document.querySelectorAll(".editable-waiting");e.forEach(function(e){e.classList.remove("editable-waiting")})},RemoveEdits:function(){var e=document.querySelectorAll(".editable-editing");e.forEach(function(e){e.innerHTML=e._innerHTML,e.classList.remove("editable-editing")}),$this.Editable.RemoveWaiting()},AddEdits:function AddEdits(EditableElement){EditableElement._innerHTML=EditableElement.innerHTML;var ValuePrev=EditableElement.querySelector(".editable-value").innerHTML;if(EditableElement.classList.add("editable-editing"),EditableElement.dataset.value=ValuePrev,EditableElement.dataset.object){var string_Select='<select class="select editable-helper editable-editor editable-select">',SelectData=eval(EditableElement.dataset.object),Property=EditableElement.dataset.property,SelectOptions="";SelectData.forEach(function(e){var t="";if(("undefined"==typeof e?"undefined":_typeof(e))===_typeof({})){for(var n in e)t+=" data-property_"+n+'="'+e[n]+'"';string_Select+='<option class="editable-helper" '+t+">"+e[Property]+"</option>"}else string_Select+='<option class="editable-helper" '+(e===ValuePrev?"selected":"")+">"+e+"</option>"}),string_Select+='</select><div class="editable-helper editable-save-button"></div>',EditableElement.innerHTML=string_Select}else{var EditType=EditableElement.dataset.type;"undefined"==typeof EditType&&(EditType="text"),EditableElement.innerHTML='<input class="textbox editable-helper editable-editor editable-textbox" type="'+EditType+'" value="'+ValuePrev+'"><div class="editable-helper editable-save-button"></div>',EditableElement.querySelector(".editable-editor").focus()}},Save:function(e,t){var n=e.closest(".mt-content"),i=n.MonsieurController,r=e.dataset.line,o=e.dataset.property,l=i.Data[r];return""===t||null===t||"undefined"==typeof t?(console.info("New Value is empty"),void Monsieur.ErrorHint(e,"Пустое поле или неправильные данные")):(e.innerHTML=e._innerHTML,e.dataset.value=t,e.querySelector(".editable-value").innerHTML=t,e.classList.remove("editable-editing"),l[o]=t,void i.LineSave(o,t,Monsieur.Editable.RemoveWaiting))}},this.Settings={DialogBlur:null,DialogAnimation:"monsieur-animation-dialog",EditableClass:"editable",EditableWaiting:"editable-waiting"},this.Culture={MonthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],WeekDays:["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],WeekDaysShort:["пн","вт","ср","чт","пт","сб","вс"]},this.TemplatorList=[],this.ContentList={}}return _createClass(MonsieurClass,[{key:"PerformanceNow",value:function(e,t){t||(t="Perf"),console.info("["+t+"]: "+Math.floor(100*(window.performance.now()-e))/100+"ms")}},{key:"Confirm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Achtung",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.CaptionColor,r=void 0===i?"":i,o=n.CaptionBackground,l=void 0===o?"":o,a=n.OnAgree,s=void 0===a?function(){}:a,u=n.OnCancel,d=void 0===u?null:u;document.activeElement.blur();var c=document.createElement("div");c.classList.add("monsieur-confirm"),Monsieur.Settings.DialogAnimation&&c.classList.add(Monsieur.Settings.DialogAnimation);var h=document.createElement("div");h.classList.add("cd-caption"),h.innerHTML=e,h.style.color=r,h.style.background=l,c.appendChild(h);var f=document.createElement("div");f.classList.add("cd-text"),f.innerHTML=t,c.appendChild(f);var p=document.createElement("div");p.classList.add("cd-buttons"),c.appendChild(p);var v=document.createElement("div");if(v.classList.add("button","cd-button","btn-diag-confirm"),v.innerHTML="Ok",v.onclick=function(){null!==s&&void 0!==s&&s(),Monsieur.Settings.DialogBlur&&Monsieur.Select(Monsieur.Settings.DialogBlur).classList.remove("monsieur-blur"),m.remove(),c.remove()},c.getElementsByClassName("cd-buttons")[0].appendChild(v),null!==d){var g=document.createElement("div");g.classList.add("button","cd-button","btn-diag-cancel"),g.innerHTML="Отмена",g.onclick=function(){null!==d&&d(),Monsieur.Settings.DialogBlur&&Monsieur.Select(Monsieur.Settings.DialogBlur).classList.remove("monsieur-blur"),m.remove(),c.remove()},c.getElementsByClassName("cd-buttons")[0].appendChild(g)}var m=document.createElement("div");m.classList.add("ConfirmDialog-wrapper"),document.body.appendChild(m),document.body.appendChild(c),Monsieur.Settings.DialogBlur&&(m.style.background="none",Monsieur.Select(Monsieur.Settings.DialogBlur).classList.add("monsieur-blur"))}},{key:"NoFeature",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""!==e&&(e='"'+e+'"'),this.Confirm("Error","Sorry, function "+e+" is not available yet")}},{key:"ErrorHint",value:function(e,t){t||(t="Поле не может быть пустым");var n=document.createElement("div");n.classList.add("monsieur-error-hint"),n.innerHTML=t,e.parentElement.style.position="relative",e.parentElement.appendChild(n),n.style.display="block";try{n.animate({opacity:[0,1]},{duration:300})}catch(i){}setTimeout(function(){try{n.animate({opacity:[1,0]},{duration:300}).onfinish=function(){n.style.display="none"}}catch(t){n.style.display="none"}setTimeout(function(){e.parentElement.style.position="",n.remove()},500)},2e3)}}]),MonsieurClass}();return new MonsieurClass}(),mr=Monsieur,MonsieurContent=function(){function MonsieurContent(_ref2){var _ref2$Target=_ref2.Target,Target=void 0===_ref2$Target?null:_ref2$Target,_ref2$Content=_ref2.Content,Content=void 0===_ref2$Content?null:_ref2$Content,_ref2$Name=_ref2.Name,Name=void 0===_ref2$Name?null:_ref2$Name,_ref2$Global=_ref2.Global,Global=void 0!==_ref2$Global&&_ref2$Global,_ref2$Title=_ref2.Title,Title=void 0===_ref2$Title?"":_ref2$Title,_ref2$Type=_ref2.Type,Type=void 0===_ref2$Type?"Untyped":_ref2$Type,_ref2$Visible=_ref2.Visible,Visible=void 0===_ref2$Visible?void 0:_ref2$Visible,_ref2$SubContent=_ref2.SubContent,SubContent=void 0===_ref2$SubContent?[]:_ref2$SubContent,_ref2$Dialog=_ref2.Dialog,Dialog=void 0!==_ref2$Dialog&&_ref2$Dialog,_ref2$DialogWrapper=_ref2.DialogWrapper,DialogWrapper=void 0===_ref2$DialogWrapper||_ref2$DialogWrapper,_ref2$DialogBlur=_ref2.DialogBlur,DialogBlur=void 0===_ref2$DialogBlur?null:_ref2$DialogBlur,_ref2$DialogAnimation=_ref2.DialogAnimation,DialogAnimation=void 0===_ref2$DialogAnimation?null:_ref2$DialogAnimation,_ref2$Show=_ref2.Show,Show=void 0===_ref2$Show?null:_ref2$Show,_ref2$Hide=_ref2.Hide,Hide=void 0===_ref2$Hide?null:_ref2$Hide,_ref2$Shower=_ref2.Shower,Shower=void 0===_ref2$Shower?function(){this.Content.style.display=""}:_ref2$Shower,_ref2$Hider=_ref2.Hider,Hider=void 0===_ref2$Hider?function(){this.Content.style.display="none"}:_ref2$Hider,_ref2$BeforeShow=_ref2.BeforeShow,BeforeShow=void 0===_ref2$BeforeShow?function(){}:_ref2$BeforeShow,_ref2$Refresh=_ref2.Refresh,Refresh=void 0===_ref2$Refresh?function(e,t){this.Controller&&this.Controller.Refresh(e,t)}:_ref2$Refresh,_ref2$OnClick=_ref2.OnClick,OnClick=void 0===_ref2$OnClick?null:_ref2$OnClick,_ref2$Controller=_ref2.Controller,Controller=void 0===_ref2$Controller?null:_ref2$Controller,_ref2$Control=_ref2.Control,Control=void 0===_ref2$Control?null:_ref2$Control,_ref2$Props=_ref2.Props,Props=void 0===_ref2$Props?function(){}:_ref2$Props,_ref2$Methods=_ref2.Methods,Methods=void 0===_ref2$Methods?function(){}:_ref2$Methods,_ref2$GetSet=_ref2.GetSet,GetSet=void 0===_ref2$GetSet?{}:_ref2$GetSet,_ref2$AfterBuild=_ref2.AfterBuild,AfterBuild=void 0===_ref2$AfterBuild?function(){}:_ref2$AfterBuild,_ref2$Disabled=_ref2.Disabled,Disabled=void 0!==_ref2$Disabled&&_ref2$Disabled,_ref2$Parent=_ref2.Parent,Parent=void 0===_ref2$Parent?null:_ref2$Parent;if(_classCallCheck(this,MonsieurContent),!Disabled){var $this=this;if(this.isContent=!0,this.Parent=Parent,null!==Parent)null!==Target?this.Target=Monsieur.Select(Target,this.Parent.Content):this.Target=this.Parent.Content,Global&&(this.Target=Monsieur.Select(Target));else{if(null===Target)return void(this.isContent=!1);this.Target=Monsieur.Select(Target)}if(null!==Content?(null===Controller||Array.isArray(Controller.Data)?this.Content=Monsieur.CreateElementFromString(Content):null===Controller||Array.isArray(Controller.Data)||(Content=Content.replace(/<[^>]+>([^<]*{{([^#}]+)}}[^<]*)<[^>]+>/g,function(e,t){var n=t.replace(/{{[^#}]+}}/g,function(e){return e.replace(e,"<span>"+e+"</span>")});return e.replace(t,n)}),this.Content=Monsieur.CreateElementFromString(Content)),this.Target.appendChild(this.Content)):this.Content=this.Target,null!==this.Content&&null!==this.Target){this.TitleContent=Monsieur.Select(Title,this.Content),this.Type=Type,this.Name=Name,this.AllContents=Monsieur.ContentList,this.Refresh=Refresh.bind(this),this.Select=function(e){return Monsieur.Select(e,$this.Content)},this.SelectAll=function(e){return Monsieur.SelectAll(e,$this.Content)},this.GetParent=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root",t=$this;null!==t.Parent&&t.Name!==e;)t=t.Parent;return t},this.GetContent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root",t=this.GetParent(e);if(t.Name===e)return t;var n=t,i=null,r=function o(t){if(t.isContent&&t.__private.ContentNames)for(var n=0;n<t.__private.ContentNames.length;n++){var r=t.__private.ContentNames[n];if(r===e)return t[r];i=o(t[r])}return i};return r(n)},this.GetIndex=function(e){return e=$this.Select(e),Array.prototype.slice.call(e.parentElement.children).indexOf(e)},this.AddEventListener=function(e,t,n){Monsieur.AddEventListenerGlobal(e,t,n,$this.Content)},Props.call(this);for(var k in GetSet)Object.defineProperty($this,k,Object.getOwnPropertyDescriptor(GetSet,k));if(Methods.call(this),this.Show=function(e){var style=window.getComputedStyle($this.Content),duration=eval(style.transitionDuration.replace("ms","*1").replace("s","*1000")),durationAni=eval(style.animationDuration.replace("ms","*1").replace("s","*1000"));if(duration<durationAni&&(duration=durationAni),duration++,"Untyped"===$this.Type||$this.isVisible||Monsieur.ContentList[$this.Type].forEach(function(e){e!==$this&&e.Hide()}),Dialog){if($this.Content.classList.add("monsieur-dialog"),DialogWrapper){$this.DialogWrapper=Monsieur.CreateElementFromString('<div class="dialog-wrapper">'),document.body.appendChild($this.DialogWrapper),$this.DialogWrapper.onclick=$this.Hide.bind($this);var zIndexWrapper=parseInt(window.getComputedStyle($this.DialogWrapper).zIndex),zIndexContent=parseInt(window.getComputedStyle($this.Content).zIndex);(Number.isNaN(zIndexContent)||zIndexContent<zIndexWrapper)&&($this.Content.style.zIndex=zIndexWrapper+1)}DialogBlur&&($this.DialogWrapper.style.background="none",Monsieur.Select(DialogBlur).classList.add("monsieur-blur")),DialogAnimation&&$this.Content.classList.add(DialogAnimation)}BeforeShow.call($this,e),Shower.call($this,e),$this.Content.style.display="",clearTimeout($this.__private.ToggleTimer),null!==Show&&($this.__private.ToggleTimer=setTimeout(function(){Show.call($this,e)},duration))},this.Hide=function(e){this.Control&&this.Control.Disactive();var style=window.getComputedStyle($this.Content),duration=eval(style.transitionDuration.replace("ms","*1").replace("s","*1000")),durationAni=eval(style.animationDuration.replace("ms","*1").replace("s","*1000"));duration<durationAni&&(duration=durationAni),duration++,Dialog&&($this.DialogWrapper&&$this.DialogWrapper.remove(),DialogBlur&&Monsieur.Select(DialogBlur).classList.remove("monsieur-blur")),Hider.call($this,e),clearTimeout($this.__private.ToggleTimer),null!==Hide&&($this.__private.ToggleTimer=setTimeout(function(){Hide.call($this,e)},duration))},this.Toggle=function(e){$this.isVisible?$this.Hide(e):$this.Show(e)},this.__private={},this.__private.ToggleTimer=null,this.__private.ContentNames=[],this.Control=new MonsieurControl(Control,$this),this.Content.onclick=OnClick?OnClick.bind($this):null,Array.isArray(SubContent))for(var i=0;i<SubContent.length;i++)SubContent[i].Parent||(SubContent[i].Parent=$this),$this.__private.ContentNames.push(SubContent[i].Name),$this[SubContent[i].Name]=new MonsieurContent(SubContent[i]);else for(var cname in SubContent)SubContent[cname].Parent=$this,SubContent[cname].Name=cname,$this.__private.ContentNames.push(cname),$this[cname]=new MonsieurContent(SubContent[cname]);"Untyped"!==Type||Visible===!1||Dialog?("Untyped"!==Type&&Visible!==!0||Dialog&&Visible!==!0)&&(Visible=!1):Visible=!0,Visible?(this.Content.style.display="",this.Control&&this.Control.Active()):this.Content.style.display="none",Controller&&(Controller.isController?(this.Controller=Controller,this.Controller.Parent=this):(Controller.Target||(Controller.Target=this.Content),Controller.Type||(Controller.Type=Templator),Controller.Parent=this,this.Controller=new Controller.Type(Controller)),this.Controller.isHasEditable&&Monsieur._EditablesEventListenerRun($this.Content)),Monsieur.ContentList[$this.Type]||(Monsieur.ContentList[$this.Type]=[]),Monsieur.ContentList[$this.Type].push(this),Array.from(this.Content.children).forEach(function(e){e.classList.contains("close")&&(e.onclick=function(e){$this.Hide(e)})}),setTimeout(function(){AfterBuild.call($this)},1)}}}return _createClass(MonsieurContent,[{key:"RefreshOne",value:function(e){this.Controller&&this.Controller.RefreshOne(e)}},{key:"Remove",value:function(e,t){this.Controller&&this.Controller.Remove(e,t)}},{key:"Add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.Controller&&this.Controller.Add(e,t,n,i)}},{key:"Edit",value:function(e,t){this.Controller&&this.Controller.Edit(e,t)}},{key:"Dispose",value:function(){this.Content.remove(),this.Control.Disactive(),delete this.Controller,delete this.Control}},{key:"isVisible",get:function(){return Monsieur.isVisible(this.Content)}},{key:"Title",get:function(){return this.TitleContent.innerHTML},set:function(e){this.TitleContent.innerHTML=e}},{key:"Data",get:function(){return this.Controller?this.Controller.Data:null},set:function(e){this.Controller&&(this.Controller.Data=e)}},{key:"Items",get:function(){return this.Controller?this.Controller.Items:null}}]),MonsieurContent}(),MonsieurControl=function(){function e(t,n){var i=this;_classCallCheck(this,e),null!==t&&t.length>0&&!function(){for(var e=i,r=function(i){t[i].Name||(t[i].Name="unnamed_"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,10)),e[t[i].Name]={Content:Monsieur.SelectAll(t[i].Target),_Content:t[i].Target,Type:t[i].Type?t[i].Type:"Untyped",isGlobal:t[i].Global,OnClick:t[i].OnClick?t[i].OnClick:n.Show,OnChange:t[i].OnChange,Active:function(){Monsieur.SelectAll(t[i].Target).forEach(function(e){e.classList.add("active")})},Disactive:function(){Monsieur.SelectAll(t[i].Target).forEach(function(e){e.classList.remove("active")})}},e[t[i].Name].Content.forEach(function(e){e.classList.add("pointer")}),t[i].Global?Monsieur.AddEventListenerGlobal("click",t[i].Target,function(r){Monsieur.SelectAll(t[i].Target).forEach(function(e){e.classList.remove("active")}),r.target.classList.add("active"),e[t[i].Name].OnClick&&e[t[i].Name].OnClick.call(n,r)}):e[t[i].Name].Content.forEach(function(r){r.onclick=function(r){Monsieur.ContentList[n.Type].forEach(function(e){e!==n&&e.Control&&e.Control.Disactive()}),e[t[i].Name].Content.forEach(function(e){e.classList.remove("active")}),r.currentTarget.classList.add("active"),e[t[i].Name].OnClick.call(n,r)}}),t[i].OnChange&&(t[i].Global?Monsieur.AddEventListenerGlobal("change",t[i].Target,function(e){t[i].OnChange.call(n,e)}):e[t[i].Name].Content.forEach(function(e){e.onchange=function(e){t[i].OnChange.call(n,e)}}))},o=0;o<t.length;o++)r(o)}()}return _createClass(e,[{key:"Active",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Untyped";for(var t in this)this[t].Type===e&&this[t].Content.forEach(function(e){e.classList.add("active")})}},{key:"Disactive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Untyped";for(var t in this)this[t].Type===e&&(this[t].Content.forEach(function(e){e.classList.remove("active")}),this[t].isGlobal&&Monsieur.SelectAll(this[t]._Content).forEach(function(e){e.classList.remove("active")}))}}]),e}(),Templator=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.Target,i=void 0===n?null:n,r=t.Data,o=void 0===r?[]:r,l=t.ListElement,a=void 0===l?".list_element":l,s=t.EmptyMessage,u=void 0===s?"":s,d=t.EmptyHide,c=void 0!==d&&d,h=t.PageSize,f=void 0===h?-1:h,p=t.DataCount,v=void 0===p?-1:p,g=t.PageGet,m=void 0===g?null:g,C=t.ShowAllButton,b=void 0===C||C,y=t.LineSave,_=void 0===y?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};setTimeout(function(){n()},500)}:y,S=t.LineAdd,$=void 0===S?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};setTimeout(function(){t()},500)}:S,E=t.NoAnimation,T=void 0!==E&&E,D=t.NoBuild,M=void 0!==D&&D,L=t.BeforeBuild,A=void 0===L?function(){}:L,k=t.AfterBuild,w=void 0===k?function(){}:k,x=t.AfterAdd,P=void 0===x?function(){}:x,B=t.Parent,N=void 0===B?null:B;_classCallCheck(this,e);var H=this;this.isController=!0,null!==N?this.Content=Monsieur.Select(i,N.Content):this.Content=Monsieur.Select(i),this.Target=this.Content,this._Data=o,this.EmptyMessage=u,this.ListElement="",this.BeforeBuild=A.bind(this),this.AfterBuild=w.bind(this),this.AfterAdd=P.bind(this),this.Parent=N,this.PageSize=f,this._PageSize=f,this._DataCount=v>0?v:this._Data.length,this._PageCursor=0,this._PageGet=m,this.LineAdd=$,this.LineSave=_,this.Type=null,this.isShowAllButton=b,this.isNoAnimaton=T,this.isEmptyHide=c;var O=[];this._Dictionary=O;var I=function(){H._Data||(H._Data={});for(var e=0;e<O.length;e++)for(var t=0;t<O[e].fields.length;t++){var n=O[e].fields[t].Target.indexOf("attributes")>-1,i=O[e].fields[t].BuildValue(H._Data);n?O[e].obj.attributes[O[e].fields[t].Target.split(".")[1]].value=i:O[e].obj[O[e].fields[t].Target]=O[e].fields[t].BuildValue(H._Data)}},G=function(){var e="";H.Content.style.display="",0===H._PageCursor&&H.Content.querySelectorAll(".mt-line, .mt-paginator, .mt-empty").forEach(function(e){e.remove()});var t=void 0,n=H._Data.length;if(H.PageSize>0){var i=H.Content.querySelector(".mt-paginator");null!==i&&i.remove(),n=parseInt(H._PageCursor)+parseInt(H.PageSize),n>H._DataCount&&(n=H._DataCount),t=H._DataCount-n,t>H.PageSize&&(t=H.PageSize)}if("ItemList"===H.Type&&0===H._Data.length&&""!==H.EmptyMessage&&!H.isEmptyHide){var r=H.ListElement.match(/\s?([\w]+) /)[0].replace(/\s/g,""),o=document.createElement(r);return o.classList.add("mt-empty"),o.innerHTML=H.EmptyMessage,void H.Content.appendChild(o)}if("ItemList"===H.Type&&0===H._Data.length&&H.isEmptyHide)return void(H.Content.style.display="none");if(0!==H._Data.length){for(var l=H._PageCursor;l<n;l++)e+=H._LineBuilder(H._Data[l],l,H._Data.length);if(H.Content.children.length<1?H.Content.innerHTML=e:(e=Monsieur.CreateElementsFromString(e,H.Content.tagName),null!==e&&e.forEach(function(e){H.Content.appendChild(e)})),H.PageSize>0&&(H._PageCursor=n),H.PageSize>0&&H._PageCursor<H._DataCount){var a=void 0,s="<span>  (Не загружено "+(H._DataCount-H._PageCursor)+") </span>";H.isShowAllButton&&(s='<span> или </span><span class="mt-btn-nextAll dotted pointer"> Все ( '+(H._DataCount-H._PageCursor)+" )</span>");var u="table"===H.Content.tagName||"thead"===H.Content.tagName||"tbody"===H.Content.tagName;if(u){var d=H.Content.querySelector("tr:first-child th").length+1;a='<tr class="mt-paginator"><td colspan="'+d+'" class="element block-head"><span class="tpltr-next dotted pointer">Показать еще '+t+"</span>"+s+"</td></tr>",a=Monsieur.CreateElementFromString(a,H.Content.tagName)}else a=Monsieur.CreateElementFromString("<div class='mt-paginator'><span class=\"mt-btn-next dotted pointer\">Показать еще "+t+"</span>"+s+"</div>");var c=a.querySelector(".mt-btn-next");c.onclick=function(){H._PageCursor>=H._Data.length?H._PageGet(H._PageCursor,H.PageSize,j):R()};var h=a.querySelector(".mt-btn-nextAll");h.onclick=function(){H.PageSize=H._DataCount,null!==H._PageGet?H._PageGet(H._PageCursor,H._DataCount-H._PageCursor,j):R()},H.Content.appendChild(a)}}},R=function(){H.BeforeBuild(),"Refresh"===H.Type?I():"ItemList"===H.Type&&G(),H.AfterBuild()},j=function(e){for(var t=0;t<e.length;t++)H._Data.push(e[t]);R()};if(this.FieldAdd=function(e){for(var t=e.attributes,n=[],i=-1,r=0;r<t.length;r++)t[r].value.indexOf("{{")>-1&&("value"!==t[r].name?n.push({Target:"attributes."+t[r].name,BuildValue:Monsieur.Compile(t[r].value)}):n.push({Target:t[r].name,BuildValue:Monsieur.Compile(t[r].value)}),i=0);e.childNodes.length<2&&e.innerHTML.indexOf("{{")>-1&&(n.push({Target:"innerHTML",BuildValue:Monsieur.Compile(e.innerHTML)}),i=0!==i?1:2),i>-1&&O.push({obj:e,fields:n})},this.Refresh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;H.PageSize=H._PageSize,H._PageCursor=0,null!==e&&(H._Data=e),H.PageCursor=0,null===t?R():H.RefreshOne(t)},this.RefreshOne=function(e){var t=Monsieur.CreateElementFromString(H._LineBuilder(H._Data[e],e,H._Data.length)),n=H.Items[e];H.Items[e].parentNode.replaceChild(t,n)},this.Add=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];0===H._Data.length&&null!==H.Content.querySelector(".mt-empty")&&H.Content.querySelector(".mt-empty").remove();var r=document.createDocumentFragment(),o=document.createElement(H.Content.tagName),l=void 0;if(n){for(l=0,H.Items.forEach(function(e){console.log(e),console.log(e.dataset.line),e.dataset.line=parseInt(e.dataset.line)+1}),o.innerHTML=H._LineBuilder(e,0,H._Data.length+1);o.childNodes[0];)r.appendChild(o.childNodes[0]);t&&r.children[0].classList.add(t),i&&H._Data.unshift(e),H.Content.prepend(r)}else{for(l=H._Data.length,i||l--,o.innerHTML=H._LineBuilder(e,l,l+1);o.childNodes[0];)r.appendChild(o.childNodes[0]);t&&r.children[0].classList.add(t),i&&H._Data.push(e),H.Content.appendChild(r)}null!==H.LineAdd&&H.LineAdd(e),H.AfterAdd(e,l)},this.Edit=function(e,t){console.log("edit this",H),H._Data[t]=e,H.Refresh(null,t)},this.Remove=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];H.Content.querySelector('.mt-line[data-line="'+e+'"]').remove();for(var n=e;n<H.Items.length;n++)H.Items[n].dataset.line=parseInt(H.Items[n].dataset.line)-1,H.Items[n].querySelectorAll("[data-line]").forEach(function(e){e.dataset.line=parseInt(e.dataset.line)-1});t&&H._Data.splice(e,1),0===H._Data.length&&H.Refresh()},Array.isArray(this._Data)){
this.Type="ItemList";var W=null!==a.match(/^[a-zA-Z0-9.,\-_ *#]+$/g);if(W){var q=this.Content.querySelector(a);q.classList.add("mt-line"),a=q.outerHTML,q.remove()}else{var z=a.match(/<[^>]+>/)[0],V=void 0,F=z.indexOf('class="');F<0?V=z.substr(0,z.length-1)+' class="mt-line"'+z.substr(z.length-1):(F=z.indexOf('"',F+8),V=z.substr(0,F)+" mt-line"+z.substr(F)),a=a.replace(z,V)}a=a.replace(/<[\s\S]+?(>)/,function(e,t){return e.replace(t,' data-line="{{i}}">')}),this.ListElement=a,this._LineBuilder=Monsieur.Compile(a,!0),null!==a.match(/<[^>]+class=['"][\w\d\s-]*(editable)[\w\d\s-]*['"][^>]*>([^<]*)<[^>]*>/)&&(this.isHasEditable=!0),this.Content.MonsieurController=this,this.Content.classList.add("mt-content")}else{this.Type="Refresh";var U=Array.prototype.slice.call(this.Content.querySelectorAll("*:not(g):not(path):not(clipPath):not(text):not(br)"));U.push(this.Content),U.forEach(function(e){H.FieldAdd(e)})}Monsieur.TemplatorList.push(this),M||R()}return _createClass(e,[{key:"Data",get:function(){return this._Data},set:function(e){this._Data=e}},{key:"Items",get:function(){return this.Content.querySelectorAll(".mt-line")}}]),e}(),TreeBuilder=function(){function e(t){var n=t.Target,i=void 0===n?null:n,r=t.Data,o=void 0===r?[]:r,l=t.ListElement,a=void 0===l?null:l,s=t.Drop,u=void 0!==s&&s,d=t.SubSelector,c=void 0===d?null:d,h=t.SubSelectorHandler,f=void 0===h?function(){}:h,p=t.BeforeBuild,v=void 0===p?function(){}:p,g=t.AfterBuild,m=void 0===g?function(){}:g,C=t.Parent,b=void 0===C?null:C;_classCallCheck(this,e),this.isController=!0,this.Content=Monsieur.Select(i),this.Target=this.Content,this.Parent=b,this._Data=o,this.SubSelector=c,this.SubSelectorHandler=f.bind(this),this.BeforeBuild=v.bind(this),this.AfterBuild=m.bind(this);var y=u?"mtb-sub_tree dropable":"mtb-sub_tree",_=0,S=null===a?this.Content.innerHTML:a;null===this.SubSelector&&(this.SubSelector=".mtb-sub_tree",S=S.replace(/^([\s\S]*)(<\/\w+>)$/,function(e,t,n){return n='<div class="'+y+'"></div>'+n,t+n})),this.LineBuilder=Monsieur.Compile(S,!0);var $=this,E=0,T=function M(e,t,n){E++;var i={$lvl:_,$key:t,$index:E,$j:n},r=Monsieur.CreateElementFromString($.LineBuilder(e,E,null,i));r.classList.add("mtb-branch");for(var o in e){var l=e[o];if(Array.isArray(l)){_++;for(var a=0;a<l.length;a++)if(null===$.SubSelector)r.appendChild(M(l[a],o,a));else{r.classList.add("mtb-has_tree"),u&&r.classList.add("dropable");var s=r.querySelector($.SubSelector);s.appendChild(M(l[a],o,a))}_--}}return r},D=function(){if($.BeforeBuild(),Array.isArray($._Data)){$.Content.innerHTML="",_++;for(var e=0;e<$._Data.length;e++)$.Content.appendChild(T($._Data[e],"root",0));_--}else $.Content.appendChild(T($._Data,"root",0));_=0,E=0,$.AfterBuild()};D(this._Data),this.Refresh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$._Data;$._Data=e,D()}}return _createClass(e,[{key:"Data",get:function(){return this._Data},set:function(e){this._Data=e}}]),e}(),MonsieurTutor=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classCallCheck(this,e);var i=this;this.TargetButton=Monsieur.Select(t),this.TargetContent=Monsieur.Select(n);var r='<div class="monsieur-tutor">\n        <div class="cd-caption">\n            <span>Шаг </span>\n            <span class="monsieur-tutor_step"></span>\n        </div>\n        <div class="monsieur-tutor_desc"></div>\n        <div class="monsieur-tutor_btns">\n            <button class="button btn-tutor element btn-tutor-stop">Прервать обучение</button>\n            <button class="button btn-tutor element btn-tutor-next">Далeе →</button></div>\n        </div>';this.Content=Monsieur.CreateElementFromString(r),this.ContentBG=Monsieur.CreateElementFromString('<div class="monsieur-tutor-bg dialog-wrapper"></div>'),this.Content.style.display="none",this.ContentBG.style.display="none",this._Description=this.Content.querySelector(".monsieur-tutor_desc"),this._Step=this.Content.querySelector(".monsieur-tutor_step"),this._ButtonNext=this.Content.querySelector(".btn-tutor-next"),this._ButtonStop=this.Content.querySelector(".btn-tutor-stop"),i.Data=[];var o=this._ButtonNext.innerHTML,l=0,a=document.createElement("div");a.style.display="none",document.body.appendChild(a);var s=window.getComputedStyle(a).backgroundColor;a.remove();var u=function(){var e=i.Data[l-1].obj;if("tr"!==e.tagName.toLowerCase())return e.style.zIndex="",e.style.position="",e.style.outline="",e.style.display="",void(e.style.backgroundColor="");var t=e.querySelectorAll("th, td");t.forEach(function(e){e.style.position="",e.style.zIndex=""})},d=function(e){if("tr"!==e.tagName.toLowerCase()){e.style.zIndex="11",e.style.position="relative",e.style.outline="5px #bee0ff solid";var t=window.getComputedStyle(e);return t.backgroundColor===s&&(e.style.backgroundColor="#fff"),void(Monsieur.isVisible(e)||("table"!==e.tagName.toLowerCase()?e.style.display="block":e.style.display="table"))}var n=e.querySelectorAll("th, td");n.forEach(function(e){e.style.zIndex="11",e.style.position="relative";var t=window.getComputedStyle(e);t.backgroundColor===s&&(e.style.backgroundColor="#fff")})},c=function(){if(console.log("tutor run"),null!==i.TargetContent){var e=i.TargetContent.querySelectorAll('*[data-tutor]:not([data-line]), *[data-tutor][data-line="0"]');if(e.length<1)return void Monsieur.Confirm("Сообщение","На этом экране нет подсказок");e.forEach(function(e){i.Data.push({obj:e,desc:e.dataset.tutor})}),i.Content.style.display="",i.ContentBG.style.display="",h()}},h=function(){if(l>0&&u(),l===i.Data.length)return void f();var e=i.Data[l].obj,t=i.Data[l].desc,n=t.match(/{([\s\S]+)}/);null!==n&&(n=n[1],t=t.replace(/{([\s\S]+)}/,""),e=e.closest(n),i.Data[l].obj=e),d(e),i._Step.innerHTML=l+1+"/"+i.Data.length,i._Description.innerHTML=t,l+1===i.Data.length&&(i._ButtonNext.innerHTML="Завершить",i._ButtonStop.style.opacity="0");var r=e.offsetLeft+e.clientWidth+10,o=e.offsetTop-i.Content.clientHeight-10;o<10&&(o=10),r+i.Content.clientWidth>window.innerWidth&&(r=e.offsetLeft-i.Content.clientWidth-10,window.innerWidth<i.Content.clientWidth+e.clientWidth&&(r=e.offsetLeft+e.clientWidth-i.Content.clientWidth-20)),(document.documentElement.scrollTop>o||document.documentElement.scrollTop+window.innerHeight<e.offsetTop+e.offsetHeight)&&(document.documentElement.scrollTop=o-10+"px"),r<10&&(r=10),i.Content.style.left=r+"px",i.Content.style.top=o+"px",l++},f=function(){u(),i.Content.style.display="none",i.ContentBG.style.display="none",i._ButtonNext.innerHTML=o,i._ButtonStop.style.opacity="",l=0,i.Data=[]};this.TargetButton.onclick=c,this._ButtonNext.onclick=h,this._ButtonStop.onclick=f,document.body.appendChild(this.Content),document.body.appendChild(this.ContentBG)},MonsieurLoading=function(){function e(){function t(e,t,n,i,r){for(var o=document.getElementById(e),l=(o.getAttribute("d")," M "+(t+i)+" "+n),a=0;a<r;a++){var s=a*(Math.PI/180),u=t+Math.cos(s)*i,d=n+Math.sin(s)*i;l+=" L "+u+" "+d}o.setAttribute("d",l)}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.Target,r=void 0===i?"body":i;_classCallCheck(this,e),this.Target=Monsieur.Select(r),this.Content=Monsieur.CreateElementFromString('<div class="ajax-loading" style="display: none">\n    <svg xmlns="http://www.w3.org/2000/svg">\n         <path d="" id="monsieur-arc1" fill="none" stroke="#449b22" stroke-width="5"></path>\n         <path d="" id="monsieur-arc2" fill="none" stroke="#61c8de" stroke-width="5"></path>\n         <path d="" id="monsieur-arc3" fill="none" stroke="#761c19" stroke-width="5"></path>\n         <path d="" id="monsieur-arc4" fill="none" stroke="#333333" stroke-width="5"></path>\n    </svg>\n</div>'),this.Target.appendChild(this.Content),t("monsieur-arc1",60,60,45,160),t("monsieur-arc2",60,60,40,130),t("monsieur-arc3",60,60,35,100),t("monsieur-arc4",60,60,30,70),this.Timeout=null}return _createClass(e,[{key:"Show",value:function(){var e=this;this.Content.style.display="",clearTimeout(this.TimeoutHide),this.Timeout=setTimeout(function(){e.Content.style.display="block"},70)}},{key:"Hide",value:function(){var e=this;clearTimeout(this.Timeout),this.TimeoutHide=setTimeout(function(){e.Content.style.display="none"},250)}}]),e}(),MonsieurTooltip=function t(e){function n(e){p.innerHTML=e,f.Target.appendChild(p)}var i=e.Target,r=void 0===i?document:i,o=e.Attribute,l=void 0===o?"data-tooltip":o,a=e.Delay,s=void 0===a?400:a,u=e.Time,d=void 0===u?1100:u,c=(e.Cursor,e.Custom),h=void 0===c?'<div class="monsieur-tooltip">':c;_classCallCheck(this,t);var f=this,p=Monsieur.CreateElementFromString(h),v=null,g=null;this.Target=Monsieur.Select(r),f.Target.querySelectorAll("["+l+"]").forEach(function(e){e.addEventListener("mouseover",function(e){var t=e.currentTarget.dataset[l.replace("data-","")];clearTimeout(g),v=setTimeout(function(){n(t)},s)}),e.addEventListener("mouseout",function(){clearTimeout(v),g=setTimeout(function(){p.remove()},d)})})};