{"version":3,"sources":["lure.core.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_typeof","Symbol","iterator","obj","constructor","prototype","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","Date","format","Lure","_DateFormat","this","LureClass","Plugin","$this","Debug","isEditableEventsEnabled","regexEach","RegExp","regexIfOuter","regexIfInner","regexExpressions","regexEditable","spaces","preCompileIfOuter","s","replace","bkt","condition","expression","preParseObjectChecker","preCompileIfInner","preCompileEach","EachList","match","lvl","current","isInnerEach","StartPoint","indexOf","EndPoint","prevStarts","slice","prevEnds","string_Each","ObjectName","a","name","eachComplied","repeat","preParse","preCompileEditable","editable","content","b","checking","c","containsSpecialObject","containsSpecialObjectTreeBuiler","isSpecialSymbol","isString","isIterator","isNumber","isNaN","parent","isCheckExpression","arguments","undefined","Compile","DomString","isListElement","string_Function","val","function_f","Function","e","console","info","error","_EditablesEventListenerRun","AddEventListenerGlobal","Editable","RemoveEdits","AddEdits","currentTarget","closest","value","valPrev","parentElement","dataset","classList","add","remove","keyCode","Save","EditableElement","querySelector","isHasEditablesEventsEnabled","document","addEventListener","contains","querySelectorAll","CreateElementFromString","string","ownerTagName","frag","createDocumentFragment","elem","createElement","innerHTML","childNodes","appendChild","CreateElementsFromString","nodes","push","Select","query","Node","SelectAll","Selector","tagName","eventName","selector","handler","thisArg","isIt","event","_EventClone","elems","call","isVisible","HTMLElement","isVisibleSelf","element","ContentStyle","window","getComputedStyle","display","opacity","visibility","parseInt","minWidth","width","minHeight","height","isVisibleParent","ClonedEvent","clone","p","d","getOwnPropertyDescriptor","get","set","setPrototypeOf","GetFileText","url","Promise","resolve","reject","xhr","XMLHttpRequest","onload","response","onerror","Error","statusText","location","protocol","host","href","substring","lastIndexOf","log","open","send","GetInlineSize","fontSize","hiddenStyle","k","style","all","setAttribute","body","sizes","clientWidth","clientHeight","removeChild","isNumeric","n","parseFloat","isFinite","date","data","getDate","mo","getMonth","year","getFullYear","hour","getHours","min","getMinutes","sec","getSeconds","toString","Culture","MonthNames","EditMode","RemoveWaiting","waiedites","forEach","item","editables","_innerHTML","ValuePrev","SaveButton","string_Select","SelectData","eval","Property","SelectOptions","attributes","EditType","focus","select","ValueNew","Content","Controller","MonsieurController","DataObject","Data","ErrorHint","LineSave","Settings","DialogBlur","DialogAnimation","EditableClass","EditableWaiting","MonthNamesShort","WeekDays","WeekDaysShort","TemplatorList","ContentList","_DialogCount","perfStart","text","x","Math","floor","performance","now","Caption","Message","_ref","_ref$CaptionColor","CaptionColor","_ref$CaptionBackgroun","CaptionBackground","_ref$OnAgree","OnAgree","_ref$OnCancel","OnCancel","activeElement","blur","dialog","title","color","background","msg","buttons","btnOk","onclick","wrap","getElementsByClassName","btnCancel","Confirm","object","div","position","animate","duration","setTimeout","onfinish"],"mappings":"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","file":"lure.core.min.js","sourcesContent":["//\r\n// Lure Framework v0.9.1 [29.08.2017]\r\n//\r\n//<utils>;\r\nif (!Date.prototype.format){\r\n    Date.prototype.format = function (format) {\r\n        return Lure._DateFormat(this, format);\r\n    }\r\n}\r\n//</utils>\r\nlet Lure = (function(){\r\n    class LureClass {\r\n        constructor() {\r\n            this.Plugin = {};\r\n            let $this = this;\r\n            this.Debug = false;\r\n            this.isEditableEventsEnabled = false;\r\n            //regexes\r\n            const regexEach = new RegExp(/{{#each\\s+([^}]+)}}/g);\r\n            const regexIfOuter = new RegExp(/{{#if\\s+([^}]+)}}([\\s\\S]*?){{#endif}}/g);\r\n            const regexIfInner = new RegExp(/{{#if([\\s\\S]*?)}}/g);\r\n            const regexExpressions = new RegExp(/{{([^#}]+)}}/g);\r\n            const regexEditable = new RegExp(/<[^>]+class=['\"][\\w\\d\\s-]*(editable)[\\w\\d\\s-]*['\"][^>]*>([^<]*)<[^>]*>/g);\r\n            //compile helpers\r\n            const spaces = \"    \";\r\n            const preCompileIfOuter = function(s){\r\n                s = s\r\n                    .replace(/#IF/g, '#if')\r\n                    .replace(/#ENDIF/g, '#endif')\r\n                    .replace(regexIfOuter, function (bkt, condition, expression ) {\r\n                        return `\\`+\r\n/* OUTER \"IF\" */\r\n(function($this){\r\n    if (${preParseObjectChecker(condition)}) {\r\n        return \\`${expression}\\`;\r\n    }\r\n    return '';\r\n})($this)+\\``;\r\n                    });\r\n                return s;\r\n            };\r\n            const preCompileIfInner = function(s){\r\n                s = s.replace(regexIfInner, function (s, condition) {\r\n                    condition = condition\r\n                        .replace(/&gt;/g,  \">\")\r\n                        .replace(/&lt;/g,  \"<\")\r\n                        .replace(/#less/g, \" < \")\r\n                        .replace(/#more/g, \" > \")\r\n                        .replace(/&amp;/g, \"&\")\r\n                        .replace(/\\|/g,    '\"');\r\n                    return `\\`+\r\n    /* LOCAL \"IF\" */\r\n    (function(){\r\n        return (${condition}); \r\n        return '';})()+\\``;\r\n                });\r\n                return s;\r\n            };\r\n            const preCompileEach = function(s){\r\n                s = s\r\n                    .replace(/{{#EACH/g, \"{{#each\")\r\n                    .replace(/{{#ENDEACH/g, \"{{#endeach\");\r\n                let EachList = s.match(regexEach);\r\n                let lvl = 0;\r\n                if (EachList !== null){\r\n                    for (let i = EachList.length-1; i >= 0; i--){\r\n                        let current = EachList[i];\r\n                        let isInnerEach = false;\r\n                        lvl++;\r\n                        let StartPoint = s.indexOf(current);\r\n                        let EndPoint   = s.indexOf(\"{{#endeach}}\", StartPoint);\r\n\r\n                        let prevStarts = s.slice(0, StartPoint).match(regexEach);\r\n                        prevStarts = prevStarts!==null ? prevStarts.length: 0;\r\n                        let prevEnds = s.slice(0, StartPoint).match(/{{#endeach}}/g);\r\n                        prevEnds = prevEnds!==null ? prevEnds.length: 0;\r\n                        if ( (prevStarts > prevEnds ))\r\n                        {\r\n                            isInnerEach = true;\r\n                            lvl = 0;\r\n                        }\r\n                        ////\r\n                        let string_Each = s.slice(StartPoint, EndPoint+12);\r\n                        let expression  = string_Each.slice(current.length, string_Each.length-12);\r\n                        let ObjectName = current.replace(/{{#each\\s+([\\s\\S]+)}}/, function(a,name){\r\n                            return name;\r\n                        });\r\n                        ObjectName = preParseObjectChecker(ObjectName);\r\n                        //the each template\r\n                        let eachComplied = '`+' +\r\n                            spaces.repeat(lvl)+'/* EACH */(function(inner, $parent){                                                                   \\r\\n' +\r\n                            spaces.repeat(lvl)+'    if (!inner || (Object.keys(inner).length === 0 && inner.constructor === Object && isNaN(inner)))   \\r\\n' +\r\n                            spaces.repeat(lvl)+'        return \"\";                                                                                     \\r\\n' +\r\n                            spaces.repeat(lvl)+'    let string_result= \"\";                                                                             \\r\\n' +\r\n                            spaces.repeat(lvl)+'    for(let j = 0; j < inner.length; j++){                                                             \\r\\n' +\r\n                            spaces.repeat(lvl)+'        let $this = inner[j];                                                                          \\r\\n' +\r\n                            spaces.repeat(lvl)+'        let o = inner[j];                                                                              \\r\\n' +\r\n                            spaces.repeat(lvl)+'        string_result = string_result + \\`'+preParse(expression) + '\\`;                                \\r\\n' +\r\n                            spaces.repeat(lvl)+'    }                                                                                                  \\r\\n' +\r\n                            spaces.repeat(lvl)+'    return string_result;                                                                              \\r\\n' +\r\n                            spaces.repeat(lvl)+'})('+ObjectName+', {$parent: typeof $parent !== \"undefined\"?$parent:null, $this: $this, i: i} ) +`         ';\r\n                        s = s.replace(string_Each, eachComplied)\r\n\r\n                    }\r\n                }\r\n                return s;\r\n            };\r\n            const preCompileEditable = function(s){\r\n                return  s.replace(regexEditable, function (match, editable, content) {\r\n                    match = match.replace(/<[\\s\\S]+?(>)/, function (a, b) {\r\n                        return a.replace(b, ` data-line=\"{{i}}\" data-property=\"${content.replace('{{','').replace('}}','')}\">`);\r\n                    });\r\n                    return match.replace(content, `<div class=\"editable-helper editable-value\">${content}</div><div class=\"editable-helper editable-icon\"></div>`);\r\n                });\r\n\r\n            };\r\n            const preParseObjectChecker = function (ObjectName) {\r\n                //ok check if it's expression\r\n                if (ObjectName.indexOf('Available + Dis')>-1)\r\n                    ;//debugger;\r\n                function checking(c) {\r\n\r\n                    let s = c.replace(/\\s/g, \"\");\r\n                    let containsSpecialObject = (s.indexOf('$item')> -1 || s.indexOf('$this') > -1 || s.indexOf('$parent') > -1 ) ;\r\n                    let containsSpecialObjectTreeBuiler = (s.indexOf('$index')> -1 || s.indexOf('$j')> -1 || s.indexOf('$key') > -1 || s.indexOf('$lvl') > -1 || s.indexOf('$g.') > -1 ) ;\r\n                    let isSpecialSymbol = (s === \"?\" || s.indexOf(\"=\") > -1 || s.indexOf(\">\") > -1|| s.indexOf(\"<\") > -1);\r\n                    let isString = s.match(/^[\"'\\\\][\\s\\S]*[\"'\\\\]$/) !== null;\r\n                    let isIterator = s === \"i\" || s === \"j\";\r\n                    let isNumber = !isNaN(s);\r\n                    if (containsSpecialObject || containsSpecialObjectTreeBuiler || isIterator || isNumber || isString ||isSpecialSymbol){\r\n                        if (s.indexOf('$g.') > -1){ //if global object\r\n                            return s.replace('$g.', '');\r\n                        }\r\n                        return c;\r\n                    }\r\n                    return \"o.\"+s;\r\n                }\r\n                ObjectName = ObjectName.replace(/[^\\-+\\/%()*]+/g, function (c) {\r\n                    let parent = c.match(/&/g);\r\n                    if (parent !== null){\r\n                        for (let i = 0; i < parent.length; i++){\r\n                            if (i < parent.length-1)\r\n                                c = c.replace('&', \"$parent\");\r\n                            else\r\n                                c = c.replace('&', \"$parent.$this\");\r\n                        }\r\n                        return c;\r\n                    }\r\n                    else {\r\n                        return checking(c);\r\n                    }\r\n                });\r\n                ObjectName = ObjectName.replace(/\\\\'/g,\"'\");\r\n                ObjectName = \"(\"+ObjectName+\")\"; //fucking concatenation shell\r\n                return ObjectName;\r\n            };\r\n            const preParse = function(c, isCheckExpression = true){\r\n                return c.replace(regexExpressions, function(bkt, expression){\r\n                    if (isCheckExpression)\r\n                        return '${'+preParseObjectChecker(expression)+'}';\r\n                    else\r\n                        return '${'+expression+'}';\r\n                });\r\n            };\r\n            /**\r\n             * Template compiler\r\n             * @param {string} DomString\r\n             * @param {boolean} isListElement\r\n             * @return {Function}\r\n             * @constructor\r\n             */\r\n            this.Compile = function(DomString, isListElement) {\r\n                DomString = DomString.replace(/[\\n]+/g, \" \").replace(/[ ]{3,}/g, '');\r\n                //shell '\r\n                DomString = DomString.replace(/'/g, \"\\\\'\");\r\n                //.replace(/&gt;/g, \">\").replace(/&lt;/g, \"<\").replace(/&amp;/g, \"&\");\r\n                if (isListElement)\r\n                {\r\n                    DomString = preCompileEditable(DomString);\r\n                    DomString = preCompileIfOuter(DomString);\r\n                    DomString = preCompileEach(DomString);\r\n                }\r\n\r\n                DomString = preParse(DomString);\r\n                DomString = preCompileIfInner(DomString);\r\n                let string_Function = `\r\nlet $this = o;\r\nlet $item = o;\r\nlet $num = i+1;\r\nlet $denum = length-i;\r\n//treebuilder's\r\nlet $index;\r\nlet $key;\r\nlet $lvl;\r\nlet $j;\r\nif (extra){\r\n    $index = extra.$index;\r\n    $key = extra.$key;\r\n    $lvl = extra.$lvl;\r\n    $j = extra.$j;\r\n}\r\nlet string_Result = \"\";\r\nif (o === undefined || (Object.keys(o).length === 0 && o.constructor === Object && isNaN(o)) ) \r\n    return '';\r\nreturn \\``;\r\n                string_Function += DomString +'`;';\r\n                //if ie\r\n                //let isUnbrowser = true;\r\n                //if (isUnbrowser){\r\n                    string_Function = string_Function\r\n                        .replace(/`/g, `'`)\r\n                        .replace(/\\$\\{([^}]*)\\}/g, function(match, val){\r\n                        return `'+${val}+'`\r\n                    });\r\n                //}\r\n\r\n                let function_f;\r\n                try {\r\n                    function_f = new Function('o', 'i', 'length', 'extra', string_Function);\r\n                }\r\n                catch (e){\r\n                    console.info(string_Function);\r\n                    console.error(e);\r\n                }\r\n                //console.log('Compiled:');\r\n                //console.log(f);\r\n                return function_f;\r\n            };\r\n            this._EditablesEventListenerRun = function(content){\r\n                $this.AddEventListenerGlobal('dblclick', '.editable', function (e) {\r\n                    $this.Editable.RemoveEdits();\r\n                    $this.Editable.AddEdits(e.currentTarget);\r\n                }, content);\r\n                $this.AddEventListenerGlobal('click', '.editable-icon', function (e) {\r\n                    $this.Editable.RemoveEdits();\r\n                    $this.Editable.AddEdits(e.currentTarget.closest('.editable'));\r\n                }, content);\r\n                $this.AddEventListenerGlobal('dblclick', '.editable', function (e) {\r\n                    $this.Editable.RemoveEdits();\r\n                    $this.Editable.AddEdits(e.currentTarget);\r\n                }, content);\r\n                //editing\r\n                $this.AddEventListenerGlobal('change', '.editable-editor', function (e) {\r\n                    let val = e.currentTarget.value;\r\n                    let valPrev = e.currentTarget.parentElement.dataset['value'];\r\n                    if (val !== valPrev)\r\n                        e.currentTarget.parentElement.classList.add('editable-waiting');\r\n                    else\r\n                        e.currentTarget.parentElement.classList.remove('editable-waiting');\r\n                }, content);\r\n\r\n                $this.AddEventListenerGlobal('keyup', '.editable-textbox', function (e) {\r\n                    if(e.keyCode === 13) {\r\n                        $this.Editable.Save(e.currentTarget.closest('.editable'),  e.currentTarget.value);\r\n                        return false;\r\n                    }\r\n\r\n                    let val = e.currentTarget.value;\r\n                    let valPrev = e.currentTarget.parentElement.dataset['value'];\r\n                    if (val !== valPrev)\r\n                        e.currentTarget.parentElement.classList.add('editable-waiting');\r\n                    else\r\n                        e.currentTarget.parentElement.classList.remove('editable-waiting');\r\n\r\n                }, content);\r\n\r\n                //save\r\n                $this.AddEventListenerGlobal('click', '.editable-save-button', function (e) {\r\n                    let EditableElement = e.currentTarget.closest('.editable');\r\n                    $this.Editable.Save(e.currentTarget.closest('.editable'),  EditableElement.querySelector('.editable-editor').value);\r\n                }, content);\r\n\r\n\r\n\r\n                if ($this.isHasEditablesEventsEnabled)\r\n                    return;\r\n                document.addEventListener('click', function (e) {\r\n                    if ( e.target.classList.contains('editable-helper') && document.querySelectorAll('.editable-helper, .editable-editing') !== null)\r\n                    {\r\n                        return;\r\n                    }\r\n                    $this.Editable.RemoveEdits();\r\n                });\r\n                $this.isHasEditablesEventsEnabled = true;\r\n            };\r\n            /**\r\n             *\r\n             * @param {string} string\r\n             * @param {string} ownerTagName\r\n             * @return {DocumentFragment}\r\n             * @constructor\r\n             */\r\n            this.CreateElementFromString = function(string, ownerTagName = \"div\"){\r\n                let frag = document.createDocumentFragment();\r\n                let elem = document.createElement(ownerTagName);\r\n                elem.innerHTML = string;\r\n                while (elem.childNodes[0]) {\r\n                    frag.appendChild(elem.childNodes[0]);\r\n                }\r\n                return frag.childNodes[0];\r\n            };\r\n            /**\r\n             *\r\n             * @param {string} string\r\n             * @param {string} ownerTagName\r\n             * @return {Array}\r\n             * @constructor\r\n             */\r\n            this.CreateElementsFromString = function(string, ownerTagName = \"div\"){\r\n                let frag = document.createDocumentFragment();\r\n                let elem = document.createElement(ownerTagName);\r\n                elem.innerHTML = string;\r\n                while (elem.childNodes[0]) {\r\n                    frag.appendChild(elem.childNodes[0]);\r\n                }\r\n                if (frag.childNodes.length > 0)\r\n                {\r\n                    let nodes = [];\r\n                    for (let i = 0; i < frag.childNodes.length; i++)\r\n                        nodes.push(frag.childNodes[i]);\r\n                    return nodes;\r\n                }\r\n                return null;\r\n            };\r\n            /**\r\n             *\r\n             * @param {css, HTMLElement} query\r\n             * @param parent\r\n             * @return {HTMLElement}\r\n             * @constructor\r\n             */\r\n            this.Select = function(query, parent = document){\r\n                if (query === '' || query === null)\r\n                    return null;\r\n                return query instanceof Node ? query : parent.querySelector(query);\r\n            };\r\n            /**\r\n             *\r\n             * @param {string} Selector\r\n             * @param {HTMLElement} parent\r\n             * @return {NodeList}\r\n             * @constructor\r\n             */\r\n            this.SelectAll = function(Selector, parent = document){\r\n                if (typeof Selector === 'undefined')\r\n                    return [];\r\n                if (typeof Selector.tagName !== 'undefined' || Selector === document)\r\n                    return [Selector];\r\n                return parent.querySelectorAll(Selector);\r\n            };\r\n            /**\r\n             *\r\n             * @param {string} eventName\r\n             * @param {string} selector\r\n             * @param {function} handler\r\n             * @param {HTMLElement} parent\r\n             * @param {Lure.Content} thisArg\r\n             * @constructor\r\n             */\r\n            this.AddEventListenerGlobal = function(eventName, selector, handler, parent = document, thisArg){\r\n                parent.addEventListener(eventName, function(e) {\r\n                    let target = e.target;\r\n                    let isIt = false;\r\n                    let event = Lure._EventClone(e);\r\n                    let elems = parent.querySelectorAll(selector);\r\n                    if (elems[0] === target)\r\n                    {\r\n                        event.currentTarget = target;\r\n                        isIt = true;\r\n                    }\r\n                    if (!isIt){\r\n                        for (let i = 0; i < elems.length; i++){\r\n                            if (elems[i].contains(target)){\r\n                                isIt = true;\r\n                                event.currentTarget = target.closest(selector);\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (isIt){\r\n                        handler.call(thisArg? thisArg : event.currentTarget, event);\r\n                    }\r\n                });\r\n            };\r\n            /**\r\n             *\r\n             * @param {HTMLElement} HTMLElement\r\n             * @return {boolean}\r\n             */\r\n            this.isVisible = function (HTMLElement){\r\n                //check invisible state;\r\n                let isVisibleSelf = function(element){\r\n                    let ContentStyle = window.getComputedStyle(element);\r\n                    if ( (ContentStyle.display === \"none\") || (ContentStyle.opacity === \"0\") || (ContentStyle.visibility === \"hidden\") )\r\n                        return false;\r\n                    //check for null-size\r\n                    if ( (parseInt(ContentStyle.minWidth) === 0 || ContentStyle.minWidth === \"auto\")  && parseInt(ContentStyle.width) === 0)\r\n                        return false;\r\n                    if ( (parseInt(ContentStyle.minHeight) === 0 || ContentStyle.minHeight === \"auto\") && parseInt(ContentStyle.height) === 0)\r\n                        return false;\r\n                    return true;\r\n                };\r\n                let isVisibleParent = function (element) {\r\n                    while (element.parentElement){\r\n                        if (!isVisibleSelf(element.parentElement))\r\n                        {\r\n                            return false;\r\n                        }\r\n                        element = element.parentElement;\r\n                    }\r\n                    return true;\r\n                };\r\n                if (!isVisibleSelf(HTMLElement))\r\n                {\r\n                    return false;\r\n                }\r\n\r\n                return isVisibleParent(HTMLElement);\r\n\r\n                return true;\r\n            };\r\n            /**\r\n             *\r\n             * @param e\r\n             * @return {ClonedEvent}\r\n             * @constructor\r\n             */\r\n            this._EventClone = function(e) {\r\n                function ClonedEvent() {}\r\n                let clone=new ClonedEvent();\r\n                for (let p in e) {\r\n                    let d = Object.getOwnPropertyDescriptor(e, p);\r\n                    if (d && (!d.writable || !d.configurable || !d.enumerable || d.get || d.set)) {\r\n                        Object.defineProperty(clone, p, d);\r\n                    }\r\n                    else {\r\n                        clone[p] = e[p];\r\n                    }\r\n                }\r\n                Object.setPrototypeOf(clone, e);\r\n                return clone;\r\n            };\r\n\r\n            this.GetFileText = function (url) {\r\n                return new Promise(function (resolve, reject) {\r\n                    let xhr = new XMLHttpRequest();\r\n                    xhr.onload = function () {\r\n                        resolve( xhr.response);\r\n                    };\r\n                    xhr.onerror = function () {\r\n                        reject(new Error(\r\n                            'XMLHttpRequest Error: '+this.statusText));\r\n                    };\r\n                    if (url.indexOf('..') > -1)\r\n                        url = url.replace('..', document.location.protocol + \"//\" + document.location.host);\r\n                    else {\r\n                        url = document.location.href.substring(0, document.location.href.lastIndexOf('/')+1) + url;\r\n                    }\r\n                    console.log('Lure.GetFileText', url);\r\n                    xhr.open('GET', url);\r\n                    //xhr.setRequestHeader('Content-Type',\"text/plain; charset=x-user-defined\");\r\n                    xhr.send();\r\n                });\r\n\r\n\r\n            };\r\n            this.GetInlineSize = function(elem, fontSize='1rem'){\r\n                const hiddenStyle = \"left:-10000px;top:-10000px;height:auto;width:auto;position:absolute;\";\r\n                const clone = document.createElement('div');\r\n                for (let k in elem.style) {\r\n                    try {\r\n                        if ((elem.style[k] !== '') && (elem.style[k].indexOf(\":\") > 0)) {\r\n                            clone.style[k] = elem.style[k];\r\n                        }\r\n                    } catch (e) {}\r\n                }\r\n                document.all ? clone.style.setAttribute('cssText', hiddenStyle) : clone.setAttribute('style', hiddenStyle);\r\n                clone.style.fontSize = fontSize;\r\n                clone.innerHTML = elem.innerHTML;\r\n                parent.document.body.appendChild(clone);\r\n                const sizes = {width:clone.clientWidth,height:clone.clientHeight};\r\n                parent.document.body.removeChild(clone);\r\n                return sizes;\r\n            };\r\n            this.isNumeric = function(n) {\r\n                return !isNaN(parseFloat(n)) && isFinite(n);\r\n            };\r\n            //this.Content = Lure.Content;\r\n            //this.Templator = Templator;\r\n            /*editable*/\r\n            //this.Editables = '.editable-waiting';\r\n            this._DateFormat = function (date, format = \"DD.MM.YYYY HH:mm:ss\") {\r\n                if (date === null || typeof date === 'undefined')\r\n                    return '';\r\n                let data = date.getDate();\r\n                let mo = date.getMonth();\r\n                let year = date.getFullYear();\r\n                let hour = date.getHours();\r\n                let min = date.getMinutes();\r\n                let sec = date.getSeconds();\r\n\r\n                return format\r\n                    .replace('DD', data.toString().length < 2? `0${data}`: data )\r\n                    .replace('D', data )\r\n                    .replace('MMM', $this.Culture.MonthNames[mo] )\r\n                    .replace('MM', mo.toString().length < 2 ? `0${mo}`:mo )\r\n                    .replace('M', mo )\r\n                    .replace('YYYY',year )\r\n                    .replace('YY',year.toString().substring(2,2) )\r\n                    .replace('Y',year )\r\n                    .replace('HH',hour.toString().length < 2 ? `0${hour}`:hour )\r\n                    .replace('hh',hour )\r\n                    .replace('mm',min.toString().length < 2 ? `0${min}`:min )\r\n                    .replace('ss',sec.toString().length < 2 ? `0${sec}`:sec );\r\n            };\r\n            this.Editable = {\r\n                EditMode: false,\r\n                RemoveWaiting(){\r\n                    let waiedites = document.querySelectorAll('.editable-waiting');\r\n                    waiedites.forEach(function (item) {\r\n                        item.classList.remove('editable-waiting');\r\n                    });\r\n                },\r\n                RemoveEdits(){\r\n                    if ($this.Editable.EditMode)\r\n                        return;\r\n                    let editables = document.querySelectorAll('.editable-editing');\r\n                    editables.forEach(function (item) {\r\n                        item.innerHTML = item._innerHTML;\r\n                        item.classList.remove('editable-editing');\r\n                    });\r\n                    $this.Editable.RemoveWaiting();\r\n                },\r\n                AddEdits(EditableElement){\r\n                    EditableElement._innerHTML = EditableElement.innerHTML;\r\n                    let ValuePrev = EditableElement.querySelector('.editable-value').innerHTML;\r\n                    EditableElement.classList.add('editable-editing');\r\n                    EditableElement.dataset['value'] = ValuePrev;\r\n                   // EditableElement.style.paddingBottom = '0px';\r\n                    //EditableElement.style.paddingTop = '0px';\r\n                    let SaveButton = $this.Editable.EditMode? '': `<div class=\"editable-helper editable-save-button\"></div>`;\r\n                    if (!EditableElement.dataset['object']) //if no selectable data, just text editor is needed\r\n                    {\r\n                        let EditType = EditableElement.dataset['type'];\r\n                        if (typeof EditType === 'undefined')\r\n                            EditType = 'text';\r\n                        EditableElement.innerHTML = `<input class=\"textbox editable-helper editable-editor editable-textbox\" type=\"${EditType}\" value=\"${ValuePrev}\"> ${SaveButton}`;\r\n                        EditableElement.querySelector('.editable-editor').focus();\r\n                        EditableElement.querySelector('.editable-editor').select();\r\n                    }\r\n                    else    //selectable data\r\n                    {\r\n                        let string_Select = `<select class=\"select editable-helper editable-editor editable-select\">`;\r\n                        let SelectData = eval(EditableElement.dataset['object']);\r\n                        //console.log('-SelectData data-', SelectData);\r\n                        let Property = EditableElement.dataset['property'];\r\n                        let SelectOptions = '';\r\n                        SelectData.forEach(function (item) {\r\n                            //SelectOptions += ``\r\n                            let attributes = '';\r\n                            if (typeof item === typeof {}){\r\n                                for (let key in item)\r\n                                {\r\n                                    attributes += ` data-property_${key}=\"${item[key]}\"`;\r\n                                }\r\n                                string_Select += `<option class=\"editable-helper\" ${attributes}>${item[Property]}</option>`;\r\n                            }\r\n                            else{\r\n                                string_Select += `<option class=\"editable-helper\" ${(item === ValuePrev)? \"selected\":\"\"}>${item}</option>`;\r\n                            }\r\n                        });\r\n                        string_Select += `</select>${SaveButton}</div>`;\r\n                        //let Select = Lure.CreateElementFromString(string_Select);\r\n                        //Select.value = ValuePrev;\r\n                        EditableElement.innerHTML = string_Select;\r\n\r\n                    }\r\n\r\n\r\n                },\r\n                Save(EditableElement, ValueNew){\r\n                    let Content = EditableElement.closest('.mt-content');\r\n                    let Controller = Content.MonsieurController;\r\n                    let i = EditableElement.dataset['line'];\r\n                    let Property = EditableElement.dataset['property'];\r\n                    let DataObject = Controller.Data[i];\r\n                    if (ValueNew === '' || ValueNew === null || typeof ValueNew === 'undefined'){\r\n                        console.info('New Value is empty');\r\n                        Lure.ErrorHint(EditableElement, \"Пустое поле или неправильные данные\");\r\n                        return;\r\n                    }\r\n                    EditableElement.innerHTML = EditableElement._innerHTML;\r\n                    EditableElement.dataset['value'] = ValueNew;\r\n                    EditableElement.querySelector('.editable-value').innerHTML = ValueNew;\r\n                    EditableElement.classList.remove('editable-editing');\r\n                    if (Property !== '$this' && Property !== \"$item\")\r\n                        DataObject[Property] = ValueNew;\r\n                    else\r\n                        DataObject = ValueNew;\r\n\r\n\r\n                    //so server now\r\n                    Controller.LineSave(i, Property, ValueNew, function () {\r\n                        Lure.Editable.RemoveWaiting();\r\n                        if (Property !== '$this' && Property !== \"$item\")\r\n                            Controller.Data[i][Property] = ValueNew;\r\n                        else\r\n                            Controller.Data[i] = ValueNew;\r\n                    });\r\n                }\r\n            };\r\n            ///\r\n            this.Settings = {\r\n                DialogBlur: null,                    //{string, jQuery, HTMLElement} - where blur on dialog\r\n                DialogAnimation: 'lure-animation-dialog', //{string} -  css-animation class\r\n                EditableClass:  'editable',\r\n                EditableWaiting:  'editable-waiting',\r\n            };\r\n            this.Culture = {\r\n                MonthNames: [\"Январь\", \"Февраль\", \"Март\", \"Апрель\", \"Май\", \"Июнь\", \"Июль\", \"Август\", \"Сентябрь\", \"Октябрь\", \"Ноябрь\", \"Декабрь\"],\r\n                MonthNamesShort: [\"янв.\", \"фев.\", \"мар.\", \"апр.\", \"май\", \"июн.\", \"июл.\", \"авг.\", \"сен.\", \"окт.\", \"ноя.\", \"дек.\"],\r\n                WeekDays: [\"Понедельник\", \"Вторник\", \"Среда\", \"Четверг\", \"Пятница\", \"Суббота\", \"Воскресенье\"],\r\n                WeekDaysShort: [\"пн\", \"вт\", \"ср\", \"чт\", \"пт\", \"сб\", \"вс\"],\r\n            };\r\n            this.TemplatorList = [];\r\n            this.ContentList = {};\r\n\r\n            /////\r\n            this._DialogCount = 0;\r\n        };\r\n\r\n        Perf(perfStart, text='Perf'){\r\n            const x = Math.floor((window.performance.now()-perfStart)*100)/100;\r\n            console.info(\"[\" + text + \"]: \" + x + \"ms\");\r\n            return x;\r\n        }\r\n\r\n        /**\r\n         * Confirmation dialog\r\n         * @param Caption\r\n         * @param Message\r\n         * @param CaptionColor\r\n         * @param CaptionBackground\r\n         * @param OnAgree\r\n         * @param OnCancel\r\n         * @constructor\r\n         */\r\n        Confirm(Caption  = \"Achtung\", Message = '', {\r\n            CaptionColor =  '',\r\n            CaptionBackground = '',\r\n            OnAgree = () => {},\r\n            OnCancel = null\r\n        } = {})\r\n        {\r\n\r\n            document.activeElement.blur();\r\n\r\n\r\n            let dialog = document.createElement('div');\r\n            dialog.classList.add('lure-confirm');\r\n            if (Lure.Settings.DialogAnimation)\r\n                dialog.classList.add(Lure.Settings.DialogAnimation);\r\n            //###title\r\n            let title = document.createElement(\"div\");\r\n            title.classList.add('cd-caption');\r\n            title.innerHTML = Caption;\r\n            title.style.color = CaptionColor;\r\n            title.style.background = CaptionBackground;\r\n            dialog.appendChild(title);\r\n            //###message field\r\n            let msg = document.createElement(\"div\");\r\n            msg.classList.add('cd-text');\r\n            msg.innerHTML = Message;\r\n            dialog.appendChild(msg);\r\n            //###buttonfield\r\n            let buttons = document.createElement(\"div\");\r\n            buttons.classList.add(\"cd-buttons\");\r\n            dialog.appendChild(buttons);\r\n            //###button confirm\r\n            let btnOk = document.createElement(\"div\");\r\n            btnOk.classList.add(\"button\", \"cd-button\", \"btn-diag-confirm\");\r\n            btnOk.innerHTML = \"Ok\";\r\n            btnOk.onclick = function(){\r\n                Lure._DialogCount--;\r\n                if (OnAgree !== null && OnAgree !== undefined)\r\n                    OnAgree();\r\n                if (Lure.Settings.DialogBlur && Lure._DialogCount < 1 )\r\n                    Lure.Select(Lure.Settings.DialogBlur).classList.remove('lure-blur');\r\n                //$(Lure.Settings.DialogBlur).removeClass('lure-blur');\r\n                wrap.remove();\r\n                dialog.remove();\r\n\r\n            };\r\n            dialog.getElementsByClassName(\"cd-buttons\")[0].appendChild(btnOk);\r\n            //###button cancel\r\n            if (OnCancel !== null)\r\n            {\r\n                let btnCancel = document.createElement(\"div\");\r\n                btnCancel.classList.add(\"button\", \"cd-button\", \"btn-diag-cancel\");\r\n                btnCancel.innerHTML = \"Отмена\";\r\n                btnCancel.onclick = function(){\r\n                    Lure._DialogCount--;\r\n                    if (OnCancel !== null)\r\n                        OnCancel();\r\n                    if (Lure.Settings.DialogBlur  && Lure._DialogCount < 1)\r\n                        Lure.Select(Lure.Settings.DialogBlur).classList.remove('lure-blur');\r\n                    //$(Lure.Settings.DialogBlur).removeClass('lure-blur');\r\n                    wrap.remove();\r\n                    dialog.remove();\r\n\r\n                };\r\n                dialog.getElementsByClassName(\"cd-buttons\")[0].appendChild(btnCancel);\r\n            }\r\n            //### Dialog-Wrapper\r\n            let wrap = document.createElement(\"div\");\r\n            wrap.classList.add('ConfirmDialog-wrapper');\r\n            document.body.appendChild(wrap);\r\n            document.body.appendChild(dialog);\r\n            Lure._DialogCount++;\r\n            if (Lure.Settings.DialogBlur)\r\n            {\r\n                wrap.style.background = 'none';\r\n                Lure.Select(Lure.Settings.DialogBlur).classList.add('lure-blur');\r\n                //$(Lure.Settings.DialogBlur).addClass('lure-blur');\r\n            }\r\n        }\r\n        //Confirmation dialog teamplate just\r\n        NoFeature(name = \"\"){\r\n            if (name !== \"\")\r\n                name = \"\\\"\"+name+\"\\\"\";\r\n            this.Confirm(\r\n                \"Error\",\r\n                \"Sorry, function \"+name+\" is not available yet\"\r\n            )\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @param object\r\n         * @param msg\r\n         * @constructor\r\n         */\r\n        ErrorHint(object, msg) {\r\n            if (!msg)\r\n                msg = \"Поле не может быть пустым\";\r\n            let div = document.createElement('div');\r\n            div.classList.add('lure-error-hint');\r\n            div.innerHTML = msg;\r\n            object.parentElement.style.position = 'relative';\r\n            object.parentElement.appendChild(div);\r\n            div.style.display = 'block';\r\n            try {\r\n                div.animate({opacity: [0, 1]}, {duration : 300});\r\n            }\r\n            catch (e){}\r\n\r\n            setTimeout(function(){\r\n\r\n                try {\r\n                    div.animate({opacity: [1, 0]}, {duration : 300})\r\n                        .onfinish = ()=>{div.style.display = 'none'};\r\n                }\r\n                catch (e){\r\n                    div.style.display = 'none';\r\n                }\r\n                //TODO CHECK FADEIN FADEOUT\r\n                setTimeout(function(){\r\n                    object.parentElement.style.position = '';\r\n                    div.remove();\r\n                }, 500)\r\n            }, 2000)\r\n        }\r\n    }\r\n    return new LureClass();\r\n})();"]}